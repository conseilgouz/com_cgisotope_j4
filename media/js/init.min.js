var $close,$toggle,$article,$height,$width,$article_frame,resetToggle,options,myid,qsRegex,$asc,$sortby,filters,rangeSlider,range_init,range_sel,min_range,max_range,cookie_name;function displayArticle(e){var t="";if(e.success){for(var a=0;a<e.length;a++){if(t+="<h1>"+e[a].title+'<button type="button" class="close">X</button></h1>',"k2"==options.entree&&e[a].image&&(t+='<span class="itemImage"><a class="moduleItemImage" href="'+e[a].link+'">',t+='<img src="'+e[a].image+'" alt="'+e[a].title+'" /></a></span>'),t+=e[a].fulltext,""==e[a].fulltext&&(t+=e[a].introtext),"k2"==options.entree&&e[a].extra_fields){if(t+='<div class="itemExtraFields"><ul>',Array.isArray(e[a].extra_fields)){$l=e[a].extra_fields.length;for(var i=0;i<$l;i++)t+='<li class="typeTextfield">',t+='<span class="itemExtraFieldsLabel">'+e[a].extra_fields[i].name+"</span>",t+='<span class="itemExtraFieldsValue">'+e[a].extra_fields[i].value+"</span>",t+="</li>"}else for(var i in $l=Object.values(e[a].extra_fields).length,e[a].extra_fields)t+='<li class="typeTextfield">',t+='<span class="itemExtraFieldsLabel">'+e[a].extra_fields[i].name+"</span>",t+='<span class="itemExtraFieldsValue">'+e[a].extra_fields[i].value+"</span>",t+="</li>";t+="</ul></div>"}if(e[a].scripts.length>0)for(var s=0;s<e[a].scripts.length;s++){var l=document.createElement("script");l.addEventListener("load",(function(){console.log("Successfully loaded scripts")})),l.src=e[a].scripts[s],document.head.appendChild(l)}if(e[a].css.length>0)for(s=0;s<e[a].css.length;s++){var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.addEventListener("load",(function(){console.log("Successfully loaded css")})),o.href=e[a].css[s],document.head.appendChild(o)}}jQuery("#isotope_an_article").html(t),($close=jQuery("button.close")).on("click touchstart",resetToggle)}else if(t=e.message,e.messages&&e.messages.error)for(var n=0;n<e.messages.error.length;n++)t+="<br/>"+e.messages.error[n]}function iso_cat_k2(e,t,a){var s="#isotope-main-"+t+" ",l=a.limit_items,o=a.limit_items,n="true"==a.empty;if(filters={},$asc="true"==a.ascending,-1!==($sortby=a.sortby).indexOf("featured"))for(sortValue=$sortby.split(","),$asc={},i=0;i<sortValue.length;i++)"featured"==sortValue[i]?$asc[sortValue[i]]=!1:$asc[sortValue[i]]="true"==a.ascending;0==a.limit_items&&jQuery(s+".iso_button_more").hide(),""==a.default_cat||null==a.default_cat||void 0===a.default_cat?filters.cat=["*"]:filters.cat=[a.default_cat],""==a.default_tag||null==a.default_tag||void 0===a.default_tag?filters.tags=["*"]:filters.tags=[a.default_tag],filters.lang=["*"],filters.alpha=["*"],filters.calendar=["*"];var r=getCookie(cookie_name);""!=r&&($arr=r.split("&"),$arr.forEach(splitCookie)),"masonry"!=a.layout&&"fitRows"!=a.layout&&"packery"!=a.layout||e("#isotope-main-"+t+" .isotope_item").css("width",100/parseInt(a.nbcol)-2+"%"),"vertical"==a.layout&&e("#isotope-main-"+t+" .isotope_item").css("width","100%"),e("#isotope-main-"+t+" .isotope_item").css("background",a.background),parseInt(a.imgmaxheight)>0&&e("#isotope-main-"+t+" .isotope_item img").css("max-height",a.imgmaxheight+"px"),parseInt(a.imgmaxwidth)>0&&e("#isotope-main-"+t+" .isotope_item img").css("max-width",a.imgmaxwidth+"px"),"true"==a.displayrange&&(min_range||(min_range=parseInt(a.minrange),max_range=parseInt(a.maxrange)),rangeSlider=new rSlider({target:"#rSlider",values:{min:parseInt(a.minrange),max:parseInt(a.maxrange)},step:parseInt(a.rangestep),set:[min_range,max_range],range:!0,tooltip:!0,scale:!0,labels:!0,onChange:function(){range_sel=rangeSlider.getValue(),range_init=rangeSlider.conf.values[0]+","+rangeSlider.conf.values[rangeSlider.conf.values.length-1],CG_Cookie_Set(t,"range",range_sel),c.isotope()}})),"string"==typeof $sortby&&($sortby=$sortby.split(","));var c=e(s+".isotope_grid").isotope({itemSelector:"none",percentPosition:!0,layoutMode:a.layout,getSortData:{title:"[data-title]",category:"[data-category]",date:"[data-date]",click:"[data-click] parseInt",rating:"[data-rating] parseInt",id:"[data-id] parseInt",featured:"[data-featured] parseInt"},sortBy:$sortby,sortAscending:$asc,filter:function(e){return function(e){var t=!qsRegex||e.text().match(qsRegex),i=e.attr("data-category"),s=e.attr("class").split(" "),l=!1,o=!0,n=!1;if(-1==filters.alpha.indexOf("*")&&(alpha=e.attr("data-title").substring(0,1),-1==filters.alpha.indexOf(alpha)))return!1;if(-1==filters.lang.indexOf("*")&&(lalang=e.attr("data-lang"),-1==filters.lang.indexOf(lalang)))return!1;if(-1==filters.calendar.indexOf("*"))for(var r in lesdates=e.attr("data-calendar").split(" "),lesdates)-1!=filters.calendar.indexOf(lesdates[r])&&(n=!0);else n=!0;if(rangeSlider){var c=e.attr("data-range");range_sel!=range_init&&(ranges=range_sel.split(","),o=parseInt(c)>=parseInt(ranges[0])&&parseInt(c)<=parseInt(ranges[1]))}if("fields"!=a.article_cat_tag&&"catfields"!=a.article_cat_tag&&"tagsfields"!=a.article_cat_tag&&"cattagsfields"!=a.article_cat_tag){if(-1!=filters.cat.indexOf("*")&&-1!=filters.tags.indexOf("*"))return t&&o&&n;if(count=0,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(i))return!1;count=1}if(-1!=filters.tags.indexOf("*"))return t&&o&&n;for(var r in s)-1!=filters.tags.indexOf(s[r])&&(l=!0,count+=1);return"true"==a.searchmultiex?(lgth=filters.cat.length+filters.tags.length,-1==filters.tags.indexOf("*")&&-1==filters.cat.indexOf("*")||(lgth-=1),t&&o&&count==lgth&&n):t&&o&&l&&n}if(ix=0,void 0===filters)return t&&o&&n;for(x in filterslength=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&(filterslength++,-1!=filters[x].indexOf("*")&&ix++);if(catok=!1,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(i))return!1;catok=!0}else catok=!0;if(tagok=!1,-1==filters.tags.indexOf("*"))for(var r in s)-1!=filters.tags.indexOf(s[r])&&(tagok=!0);else tagok=!0;if(ix==filterslength&&catok&&tagok)return t&&o&&n;for(var d in count=0,s)for(x in filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&-1!=filters[x].indexOf(s[d])&&(count+=1);if("true"==a.searchmultiex){for(x in lgth=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&(lgth+=filters[x].length,-1!=filters[x].indexOf("*")&&(lgth-=1));return t&&o&&count==lgth&&tagok&&n}return t&&o&&count>=filterslength-ix&&catok&&tagok&&n}(jQuery(this))}});if(c.imagesLoaded((function(){c.isotope("option",{itemSelector:".isotope_item"});var e=c.find(".isotope_item");c.isotope("appended",e),_(),"random"==$sortby?c.isotope("shuffle"):c.isotope(),$width=$toggle.width(),$height=$toggle.height()})),e(s+".isotope-div").on("refresh",(function(){c.isotope()})),"infinite"==a.pagination){var d=c.data("isotope");if(c.infiniteScroll({path:function(){return currentpage=this.loadCount,"?start="+(currentpage+1)*a.page_count},append:".isotope_item",outlayer:d,status:".page-load-status"}),"true"==a.infinite_btn){c.infiniteScroll("option",{button:".iso_button_more",loadOnScroll:!1});let t=e(".iso_button_more");jQuery(s+".iso_button_more").show(),t.on("click",(function(){c.infiniteScroll("loadNextPage"),c.infiniteScroll("option",{loadOnScroll:!0}),t.hide()}))}else jQuery(s+".iso_div_more").hide();c.on("append.infiniteScroll",(function(t,i,l,o,n){!function(t){if("false"!=a.displayalpha)for(x=0;x<t.length-1;x++)alpha=t[x].attributes["data-alpha"].value,0==e(s+".filter-button-group-alpha").find(".iso_button_alpha_"+alpha).length&&e(s+".filter-button-group-alpha").append('<button class="'+a.button_bootstrap+" iso_button_alpha_"+alpha+'" data-sort-value="'+alpha+'" title="'+alpha+'">'+alpha+"</button>")}(o)}))}e("#offcanvas-hamburger-btn").on("click",(function(){var e=function(t,a=!1){!1===a||a>0?(0!=a&&a--,setTimeout((function(){e(t,a)}),100)):(rangeSlider.onResize(),t())};e((function(){jQuery(".offcanvas")}),3)})),e(s+".sort-by-button-group").on("click","button",(function(){!function(e){var a=e.attr("data-sort-value");if("random"==a)return CG_Cookie_Set(t,"sort",a+"-"),void c.isotope("shuffle");sens=e.attr("data-sens"),a=a.split(","),e.hasClass("is-checked")?"-"==sens?(e.attr("data-sens","+"),asc=!0):(e.attr("data-sens","-"),asc=!1):(sens=e.attr("data-init"),e.attr("data-sens",sens),asc=!0,"-"==sens&&(asc=!1));for(sortAsc={},i=0;i<a.length;i++)"featured"==a[i]?sortAsc[a[i]]=!1:sortAsc[a[i]]=asc;CG_Cookie_Set(t,"sort",a+"-"+asc),c.isotope({sortBy:a,sortAscending:sortAsc})}(e(this))})),e(s+".sort-by-button-group").each((function(t,a){var i=e(a);i.on("click","button",(function(){i.find(".is-checked").removeClass("is-checked"),e(this).addClass("is-checked")}))}));var u=e(s+".quicksearch").keyup(debounce((function(){qsRegex=new RegExp(u.val(),"gi"),CG_Cookie_Set(t,"search",u.val()),c.isotope(),_()})));e(s+".ison-cancel-squared").on("click",(function(){e(s+".quicksearch").val(""),qsRegex=new RegExp(u.val(),"gi"),CG_Cookie_Set(t,"search",u.val()),rangeSlider&&(range_sel=range_init,ranges=range_sel.split(","),rangeSlider.setValues(parseInt(ranges[0]),parseInt(ranges[1])),CG_Cookie_Set(t,"range",range_sel)),filters.cat=["*"],filters.tags=["*"],filters.lang=["*"],filters.alpha=["*"],filters.calendar=["*"],e(s+".filter-button-group-cat").each((function(t,a){e(a).each((function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)}))})),e(s+".filter-button-group-tags").each((function(t,a){e(a).each((function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)}))})),e(s+".filter-button-group-fields").each((function(t,a){var i=e(a).attr("data-filter-group");filters[i]=["*"],e(this).find(".is-checked").removeClass("is-checked"),e(this).find(".iso_hide_elem").removeClass("iso_hide_elem"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)})),e(s+".iso_lang").each((function(t,a){e(a).each((function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)}))})),e(s+".filter-button-group-alpha").each((function(t,a){e(a).each((function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)}))})),e(s+".filter-button-group-calendar").each((function(a,i){var s=e(i);CG_Cookie_Set(t,"calendar_pos",0),s.each((function(){e(this).find(".is-checked").removeClass("is-checked")}))})),e(s+'select[id^="isotope-select-"]').each((function(t,a){$val=e(this).parent().parent().parent().attr("data-filter-group");var i=document.querySelector("joomla-field-fancy-select#isotope-select-"+$val).choicesInstance;i.removeActiveItems(),i.setChoiceByValue("")})),e("#clonedbuttons .is-checked").remove(),update_cookie_filter(filters),c.isotope(),_(),e(s+".quicksearch").focus()})),"listmulti"==a.displayfiltertags&&e(s+'select[id^="isotope-select-tags"]').each((function(t,a){e(a).on("choice",(function(t,a){h(e(this),t,"choice")})),e(a).on("removeItem",(function(t,a){h(e(this),t,"remove",t.detail)})),$parent=e(a).parent().parent().parent().attr("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=["*"])})),"listmulti"==a.displayfiltercat&&e(s+'select[id^="isotope-select-cat"]').each((function(t,a){e(a).on("choice",(function(t,a){h(e(this),t,"choice")})),e(a).on("removeItem",(function(t,a){h(e(this),t,"remove",t.detail)})),$parent=e(a).parent().parent().parent().attr("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=["*"])})),"listmulti"==a.displayfilterfields&&e(s+'select[id^="isotope-select-fields"]').each((function(t,a){e(a).on("choice",(function(t,a){h(e(this),t,"choice")})),e(a).on("removeItem",(function(t,a){h(e(this),t,"remove",t.detail)})),$parent=e(a).parent().parent().parent().attr("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=["*"])})),"list"!=a.displayfiltercat&&"listex"!=a.displayfiltercat||e(s+".filter-button-group-cat").on("change",(function(){p(e(this))})),"list"!=a.displayfiltertags&&"listex"!=a.displayfiltertags||e(s+".filter-button-group-tags").on("change",(function(){p(e(this))})),"list"!=a.displayfilterfields&&"listex"!=a.displayfilterfields||e(s+".filter-button-group-fields").on("change",(function(){p(e(this))})),"multi"!=a.displayfiltercat&&"multiex"!=a.displayfiltercat||(e(s+".filter-button-group-cat").on("click","button",(function(){m(e(this))})),e(s+".filter-button-group-cat").each((function(t,a){$(e(a))}))),"multi"!=a.displayfiltertags&&"multiex"!=a.displayfiltertags||(e(s+".filter-button-group-tags").on("click","button",(function(){m(e(this))})),e(s+".filter-button-group-tags").each((function(t,a){$(e(a))}))),"multi"!=a.displayfilterfields&&"multiex"!=a.displayfilterfields||(e(s+".filter-button-group-fields").on("click","button",(function(){m(e(this))})),e(s+".filter-button-group-fields").each((function(t,a){$(e(a))}))),"multi"==a.language_filter&&(e(s+".iso_lang").on("click","button",(function(){m(e(this))})),e(s+".iso_lang").each((function(t,a){$(e(a))}))),"multi"==a.displayalpha&&(e(s+".filter-button-group-alpha").on("click","button",(function(){m(e(this))})),e(s+".filter-button-group-alpha").each((function(t,a){$(e(a))}))),"button"==a.displayfiltercat&&(e(s+".filter-button-group-cat").on("click","button",(function(){g(e(this))})),e(s+".filter-button-group-cat").each((function(t,a){v(e(a))}))),"button"==a.displayfiltertags&&(e(s+".filter-button-group-tags").on("click","button",(function(){g(e(this))})),e(s+".filter-button-group-tags").each((function(t,a){v(e(a))}))),"button"==a.displayfilterfields&&(e(s+".filter-button-group-fields").on("click","button",(function(){g(e(this))})),e(s+".filter-button-group-fields").each((function(t,a){v(e(a))}))),"button"==a.language_filter&&(e(s+".iso_lang").on("click","button",(function(){g(e(this))})),e(s+".iso_lang").each((function(t,a){v(e(a))}))),e(s+".filter-button-group-calendar").on("click touchstart","button",(function(){if(g(e(this)),e(this).hasClass("has_date")){var a=document.getElementById("filter-button-group-calendar");CG_Cookie_Set(t,"calendar_pos",a.scrollLeft)}})),e(s+".filter-button-group-calendar").each((function(t,a){v(e(a))})),"button"==a.displayalpha&&(e(s+".filter-button-group-alpha").on("click","button",(function(){g(e(this))})),e(s+".filter-button-group-alpha").each((function(t,a){v(e(a))}))),e(s+".iso_button_more").on("click",(function(t){t.preventDefault(),l>0?(l=0,e(this).text(a.libless)):(l=a.limit_items,e(this).text(a.libmore)),_()})),e("#clonedbuttons").on("click touchstart","button",(function(){if("multi"==e(this).attr("data-clone-type")&&m(e(this)),"button"==e(this).attr("data-clone-type")&&g(e(this)),"list_multi"==e(this).attr("data-clone-type")){jQuery.Event("clonedbuttons");h(e(this),event,"remove")}"list"==e(this).attr("data-clone-type")&&p(e(this)),e(this).remove()}));var f=document.getElementById("offcanvas_isotope");function p(t){$parent=t.attr("data-filter-group"),$isclone=!1,"clonedbuttons"==t.parent()[0].id?($selectid=$parent,$isclone=!0):$selectid=t.attr("data-filter-group");var a=t.find(":selected").val();void 0===a&&(a=""),elChoice=document.querySelector("joomla-field-fancy-select#isotope-select-"+$selectid),choicesInstance=elChoice.choicesInstance,$needclone=!1,$grdparent=t.parent(),"offcanvas-body"==$grdparent[0].className&&($needclone=!0),""==a?(choicesInstance.removeActiveItems(),choicesInstance.setChoiceByValue(""),filters[$parent]=["*"],e("#clonedbuttons").find('[data-filter-group="'+$parent+'"]').remove()):(filters[$parent]=[a],$needclone&&(e("#clonedbuttons").find('[data-filter-group="'+$parent+'"]').remove(),lib=choicesInstance.getValue().label,e('<button class="btn btn-sm iso_button_'+$parent+"_"+a+' is-checked" data-sort-value="'+a+'" title="'+lib+'" data-filter-group="'+$parent+'" data-clone-type="list">'+lib+"</button>").prependTo("#clonedbuttons"))),update_cookie_filter(filters),c.isotope(),_()}function h(t,a,i){$evnt=a,$params=i,$isclone=!1,"clonedbuttons"==t.parent()[0].id?($parent=t.attr("data-filter-group"),$selectid="isotope-select-"+$parent,$isclone=!0):($parent=t.parent().parent().parent().attr("data-filter-group"),$selectid=t.attr("id")),void 0===filters[$parent]&&(filters[$parent]=[]);var s=document.querySelector("joomla-field-fancy-select#"+$selectid).choicesInstance;if("remove"==$params){if($isclone){removeFilter(filters,$parent,t.attr("data-sort-value")),savfilter=JSON.parse(JSON.stringify(filters)),s.removeActiveItems(),filters=JSON.parse(JSON.stringify(savfilter)),s.removeActiveItemsByValue("");for(var l=0;l<filters[$parent].length;l++)$val=filters[$parent][l],s.setChoiceByValue($val)}else removeFilter(filters,$parent,$evnt.detail.value);0==filters[$parent].length&&(filters[$parent]=["*"],s.setChoiceByValue(""))}$needclone=!1,$grdparent=t.parent().parent().parent().parent().parent(),"offcanvas-body"==$grdparent[0].className&&($needclone=!0),"choice"==$params&&(sel=$evnt.detail.choice.value,lib=$evnt.detail.choice.label,""==sel?(filters[$parent]=["*"],s.removeActiveItems(),s.setChoiceByValue(""),e("#clonedbuttons").find('[data-filter-group="'+$parent+'"]').remove()):(-1!=filters[$parent].indexOf("*")&&(s.removeActiveItemsByValue(""),filters[$parent]=[]),$needclone&&e('<button class="btn btn-sm iso_button_'+$parent+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+$parent+'" data-clone-type="list_multi">'+lib+"</button>").prependTo("#clonedbuttons"),addFilter(filters,$parent,sel)),s.hideDropdown()),update_cookie_filter(filters),c.isotope(),_()}function g(t){if(!t.hasClass("disabled")){$parent=t.parent().attr("data-filter-group"),child=t.attr("data-child");var a=t.attr("data-sort-value");if($isclone=!1,"clonedbuttons"==t.parent()[0].id&&($parent=t.attr("data-filter-group"),e(".iso_button_"+$parent+"_"+a).toggleClass("is-checked"),a="*",e(".iso_button_"+$parent+"_"+a).toggleClass("is-checked"),$isclone=!0),void 0===filters[$parent]&&(filters[$parent]={}),$needclone=!1,$grdparent=t.parent().parent(),"offcanvas-body"==$grdparent[0].className&&($needclone=!0),$needclone){if(t.hasClass("is-checked"))return;if(e("#clonedbuttons").find('[data-filter-group="'+$parent+'"]').remove(),"*"!=a){let e=t.clone(!0).prependTo("#clonedbuttons");e.attr("data-filter-group",$parent),e.attr("data-child",child),e.attr("data-clone-type","button"),e.toggleClass("is-checked")}}"*"==a?(filters[$parent]=["*"],$isclone&&e(".filter-button-group-"+$parent).find('[data-sort-value="*"]').addClass("is-checked"),child&&set_family_all(s,child,"button")):(filters[$parent]=[a],child&&set_family(s,"",child,a,"button")),update_cookie_filter(filters),c.isotope(),_()}}function m(t){var a=t.attr("data-sort-value");child=t.attr("data-child"),$isclone=!1,"clonedbuttons"==t.parent()[0].id?($parent=t.attr("data-filter-group"),e(".iso_button_"+$parent+"_"+a).toggleClass("is-checked"),$isclone=!0):($parent=t.parent().attr("data-filter-group"),t.toggleClass("is-checked"));var i=t.hasClass("is-checked");if($needclone=!1,$grdparent=t.parent().parent(),"offcanvas-body"==$grdparent[0].className&&($needclone=!0),$needclone)if(i){let e=t.clone(!0).prependTo("#clonedbuttons");e.attr("data-filter-group",$parent),e.attr("data-child",child),e.attr("data-clone-type","multi")}else e("#clonedbuttons .iso_button_"+$parent+"_"+a).remove();void 0===filters[$parent]&&(filters[$parent]=[]),"*"==a?(filters[$parent]=["*"],e("#clonedbuttons").find('[data-filter-group="'+$parent+'"]').remove(),child&&set_family_all(s,child,"button")):(removeFilter(filters,$parent,"*"),removeFilter(filters,$parent,"none"),i?(addFilter(filters,$parent,a),child&&set_family(s,$parent,child,a,"button")):(removeFilter(filters,$parent,a),0==filters[$parent].length&&(filters[$parent]=["*"],$isclone&&e(".filter-button-group-"+$parent).find('[data-sort-value="*"]').addClass("is-checked")),child&&(filters[$parent]==["*"]?set_family_all(s,child,"button"):del_family(s,$parent,child,a,"button")))),update_cookie_filter(filters),c.isotope(),_()}function v(t){$parent=e(this).parent().attr("data-filter-group"),t.on("click touchstart","button",(function(){e(this).hasClass("disabled")||(e(this).parent().find(".is-checked").removeClass("is-checked"),e(this).addClass("is-checked"))}))}function $(t){t.on("click","button",(function(){$parent=e(this).parent().attr("data-filter-group"),"*"==e(this).attr("data-sort-value")?(e(this).parent().find(".is-checked").removeClass("is-checked"),e(this).addClass("is-checked")):0==filters[$parent].length||"*"==filters[$parent]?(e(this).parent().find('[data-sort-value="*"]').addClass("is-checked"),filters[$parent]=["*"],update_cookie_filter(filters),c.isotope()):e(this).parent().find('[data-sort-value="*"]').removeClass("is-checked")}))}function _(){jQuery(s+".isotope_item").hasClass("iso_hide_elem")&&jQuery(s+".isotope_item").removeClass("iso_hide_elem");var e=c.isotope("getFilteredItemElements"),t=jQuery(e).length;if(n&&(0==t?jQuery(s+".iso_div_empty").removeClass("iso_hide_elem"):jQuery(s+".iso_div_empty").hasClass("iso_hide_elem")||jQuery(s+".iso_div_empty").addClass("iso_hide_elem")),l>0){var i=0;jQuery(e).each((function(){i>=l&&jQuery(this).addClass("iso_hide_elem"),i++})),i<l&&"infinite"!=a.pagination?jQuery(s+".iso_button_more").hide():jQuery(s+".iso_button_more").show()}0==l&&o>0&&"infinite"!=a.pagination&&(jQuery(e).each((function(){jQuery(this).hasClass("iso_hide_elem")&&(t-=1)})),t>o?jQuery(s+".iso_button_more").show():jQuery(s+".iso_button_more").hide()),c.isotope()}f.addEventListener("hidden.bs.offcanvas",(function(){document.getElementById("offcanvas_isotope").classList.remove("offcanvas25"),document.getElementsByClassName("isotope_grid")[0].classList.remove("isogrid75"),document.getElementsByClassName("isotope_grid")[0].classList.remove("offstart"),document.getElementsByClassName("isotope_grid")[0].classList.remove("offend"),c.isotope()})),f.addEventListener("show.bs.offcanvas",(function(){document.getElementById("offcanvas_isotope").classList.add("offcanvas25"),document.getElementById("offcanvas_isotope").classList.contains("offcanvas-start")&&document.getElementsByClassName("isotope_grid")[0].classList.add("offstart"),document.getElementById("offcanvas_isotope").classList.contains("offcanvas-end")&&document.getElementsByClassName("isotope_grid")[0].classList.add("offend"),c.isotope()}))}function debounce(e,t){var a;return function(){a&&clearTimeout(a),a=setTimeout((function(){e(),a=null}),t||100)}}function addFilter(e,t,a){-1==e[t].indexOf(a)&&e[t].push(a)}function removeFilter(e,t,a){var i=e[t].indexOf(a);-1!=i&&e[t].splice(i,1)}function update_cookie_filter(e){for(x in $filter_cookie="",e)$filter_cookie.length>0&&($filter_cookie+=">"),$filter_cookie+=x+"<"+e[x].toString();$filter_cookie.length>0&&($filter_cookie+=">"),CG_Cookie_Set(myid,"filter",$filter_cookie)}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}function CG_Cookie_Set(e,t,a){$secure="","https:"==window.location.protocol&&($secure="secure;"),lecookie=getCookie(cookie_name),$val=t+":"+a,$cook=$val,""!=lecookie&&(lecookie.indexOf(t)>=0?($cook="",$arr=lecookie.split("&"),$arr.forEach(replaceCookie,$val)):$cook=lecookie+"&"+$val),document.cookie=cookie_name+"="+$cook+"; path=/; samesite=lax;"+$secure}function replaceCookie(e,t,a){this.startsWith("search:")&&e.indexOf("search:")>=0&&(a[t]=this),this.startsWith("sort:")&&e.indexOf("sort:")>=0&&(a[t]=this),this.startsWith("filter:")&&e.indexOf("filter:")>=0&&(a[t]=this),this.startsWith("range:")&&e.indexOf("range:")>=0&&(a[t]=this),this.startsWith("calendar_pos:")&&e.indexOf("calendar_pos:")>=0&&(a[t]=this),$cook.length>0&&($cook+="&"),$cook+=a[t]}function splitCookie(e){if(me="#isotope-main-"+myid+" ",e.indexOf("search:")>=0&&jQuery(me+".quicksearch").length>0&&(val=e.split(":"),qsRegex=new RegExp(val[1],"gi"),jQuery(me+".quicksearch").val(val[1])),e.indexOf("sort:")>=0){for(val=e.split(":"),val=val[1].split("-"),$sortby=val[0].split(","),$asc="true"==val[1],sortAsc={},i=0;i<$sortby.length;i++)"featured"==$sortby[i]?sortAsc[$sortby[i]]=!1:sortAsc[$sortby[i]]=$asc;$asc=sortAsc,jQuery(me+".sort-by-button-group").each((function(e,t){var a=jQuery(t);"*"!=val[0]&&(a.find(".is-checked").removeClass("is-checked"),a.children().each((function(e,t){jQuery(this).attr("data-sort-value")==val[0]&&(jQuery(this).addClass("is-checked"),jQuery(this).attr("data-sens","+"),"true"!=val[1]&&jQuery(this).attr("data-sens","-"))})))}))}if(e.indexOf("filter:")>=0&&(val=e.split(":"),val[1].length>0))for(val=val[1].split(">"),x=0;x<val.length-1;x++)if(values=val[x].split("<"),"cat"==values[0]||"tags"==values[0]||"lang"==values[0]||"alpha"==values[0]){if("tags"==values[0]&&"listmulti"==options.displayfiltertags||"cat"==values[0]&&"listmulti"==options.displayfiltercat){var t=(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else{for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c]);if("offcanvas-body"==a.parentElement.parentElement.className)for(c=0;c<t.getValue().length;c++)lib=t.getValue()[c].label,sel=t.getValue()[c].value,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list_multi">'+lib+"</button>").prependTo("#clonedbuttons")}}else if("*"!=values[1])for(filters[values[0]]=values[1].split(","),"lang"==values[0]?jQuery(me+".iso_lang").find(".is-checked").removeClass("is-checked"):jQuery(me+".filter-button-group-"+values[0]).find(".is-checked").removeClass("is-checked"),v=0;v<filters[values[0]].length;v++){if("tags"==values[0]&&"list"==options.displayfiltertags&&"tagsfields"!=options.article_cat_tag&&"cattagsfields"!=options.article_cat_tag||"cat"==values[0]&&"list"==options.displayfiltercat){if(jQuery(me+".filter-button-group-"+values[0]+" .isotope_select").val(filters[values[0]][v]).attr("selected",!0),"offcanvas-body"==(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).parentElement.parentElement.className){t=a.choicesInstance;sel=filters[values[0]][v],lib=t.getValue().label,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list">'+lib+"</button>").prependTo("#clonedbuttons")}}else if($button=jQuery(me+".iso_button_"+values[0]+"_"+filters[values[0]][v]),$button.addClass("is-checked"),"offcanvas-body"==$button.parent().parent()[0].className){let e=$button.clone(!0).prependTo("#clonedbuttons");e.attr("data-filter-group",values[0]),e.attr("data-clone-type","button"),("cat"!=values[0]||"multi"!=options.displayfiltercat&&"multiex"!=options.displayfiltercat)&&("tags"!=values[0]||"multi"!=options.displayfiltertags&&"multiex"!=options.displayfiltercat)&&("alpha"!=values[0]||"multi"!=options.displayalpha&&"multiex"!=options.displayalpha)||e.attr("data-clone-type","multi")}}}else if("calendar"==values[0])"*"!=values[1]&&jQuery(me+".iso_button_calendar_"+values[1]).addClass("is-checked");else if("listmulti"==options.displayfilterfields){t=(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else{for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c]);if("offcanvas-body"==a.parentElement.parentElement.className)for(c=0;c<t.getValue().length;c++)lib=t.getValue()[c].label,sel=t.getValue()[c].value,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list_multi">'+lib+"</button>").prependTo("#clonedbuttons")}}else if("*"!=values[1])for(jQuery(me+".class_fields_"+values[0]).find(".is-checked").removeClass("is-checked"),filters[values[0]]=values[1].split(","),v=0;v<filters[values[0]].length;v++)if("list"==options.displayfilterfields||"listex"==options.displayfilterfields){var a;if($this=jQuery(me+".class_fields_"+values[0]+" .isotope_select").val(filters[values[0]][v]),$this.attr("selected",!0),"offcanvas-body"==(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).parentElement.parentElement.parentElement.className){t=a.choicesInstance;sel=filters[values[0]][v],lib=t.getValue().label,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list">'+lib+"</button>").prependTo("#clonedbuttons")}child=$this.find(":selected").attr("data-child"),child&&(sortValue=filters[values[0]][v],set_family(me,"",child,sortValue,"list"))}else $this=jQuery(me+".iso_button_"+values[0]+"_"+filters[values[0]][v]),$this.addClass("is-checked"),child=$this.attr("data-child"),child&&(sortValue=$this.attr("data-sort-value"),set_family(me,"",child,sortValue,"button"));e.indexOf("range:")>=0&&(val=e.split(":"),val[1].length>0&&(spl=val[1].split(","),min_range=parseInt(spl[0]),max_range=parseInt(spl[1]))),e.indexOf("calendar_pos:")>=0&&(val=e.split(":"),val[1].length>0&&(cal_container=document.getElementById("filter-button-group-calendar"),cal_container.scrollLeft=val[1]))}function set_family(e,t,a,i,s){for(parents=[];a;){if("list"==s?($this=jQuery(e+".filter-button-group-fields").find('[data-group-id="'+a+'"]'),$this.find("option").addClass("iso_hide_elem"),a=$this.find('[data-all="all"]').removeClass("iso_hide_elem").attr("selected",!0).attr("data-child")):($this=jQuery(e+".filter-button-group-fields").parent().find('[data-group-id="'+a+'"]'),(""==t||""!=t&&1==filters[t].length&&"*"!=filters[t])&&$this.find("button").addClass("iso_hide_elem").removeClass("is-checked"),a=$this.find("button.iso_button_tout").removeClass("iso_hide_elem").addClass("is-checked").attr("data-child")),0==parents.length){if($this.find('[data-parent="'+i+'"]').removeClass("iso_hide_elem"),newparents=$this.find('[data-parent="'+i+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)$val="list"==s?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=$val&&parents.push($val)}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(i=parents[$i])&&($this.find('[data-parent="'+i+'"]').removeClass("iso_hide_elem"),$vals=$this.find('[data-parent="'+i+'"]'),$vals.length>0))for($j=0;$j<$vals.length;$j++)$val="list"==s?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=$val&&newparents.push($val);parents=newparents}childstr=$this.attr("data-filter-group"),filters[childstr]=["*"],i=""}}function del_family(e,t,a,i,s){for(parents=[];a;){if($this=jQuery(e+".filter-button-group-fields").parent().find('[data-group-id="'+a+'"]'),$this.find('[data-parent="'+i+'"]').addClass("iso_hide_elem").removeClass("is-checked"),a=$this.find("button.iso_button_tout").removeClass("iso_hide_elem").addClass("is-checked").attr("data-child"),0==parents.length){if(newparents=$this.find('[data-parent="'+i+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)$val="list"==s?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=$val&&(parents.push($val),newparents[$i].addClass("iso_hide_elem"))}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(i=parents[$i])&&($vals=$this.find('[data-parent="'+i+'"]'),$vals.length>0))for($j=0;$j<$vals.length;$j++)$val="list"==s?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=$val&&(newparents.push($val),$vals[$j].addClass("iso_hide_elem"));parents=newparents}childstr=$this.attr("data-filter-group"),filters[childstr]=["*"],i=""}}function set_family_all(e,t,a){for(parents=[];t;){for($this="list"==a?jQuery(e+".filter-button-group-fields"):jQuery(e+".filter-button-group-fields").parent(),parents=$this.find('[data-child="'+t+'"]'),$i=0;$i<parents.length;$i++)jQuery(parents[$i]).hasClass("iso_hide_elem")||($val="list"==a?parents[$i].getAttribute("value"):parents[$i].getAttribute("data-sort-value"),$val&&"*"!=$val&&$this.find('[data-parent="'+$val+'"]').removeClass("iso_hide_elem"));"list"==a?t=$this.find('[data-group-id="'+t+'"]').find('[data-all="all"]').attr("data-child"):($this.find('[data-group-id="'+t+'"]').find("button").removeClass("is-checked"),$this.find('[data-group-id="'+t+'"]').find("button.iso_button_tout").addClass("is-checked"),$this=jQuery(e+".filter-button-group-fields").parent().find('[data-group-id="'+t+'"]'),t=$this.find("button.iso_button_tout").attr("data-child")),childstr=$this.attr("data-filter-group"),filters[childstr]=["*"]}}function go_click(e,t){event.preventDefault(),"webLinks"==e||window.event.ctrlKey?window.open(t,"_blank"):location=t}jQuery(document).ready((function(e){e(".isotope-main").each((function(){var t=e(this);return myid=t.attr("data"),"undefined"==typeof Joomla||void 0===Joomla.getOptions?(console.error("Joomla.getOptions not found!\nThe Joomla core.js file is not being loaded."),!1):void 0!==(options=Joomla.getOptions("cg_isotope_"+myid))&&(cookie_name="cg_isotope_"+myid,void iso_cat_k2(e,myid,options))})),$toggle=jQuery(".isotope_grid"),$article=jQuery(".isotope_an_article"),$article_frame=jQuery("iframe#isotope_article_frame"),"ajax"!=options.readmore&&"iframe"!=options.readmore||($height=$toggle.height(),$width=$toggle.width(),e(".isotope-readmore-title").on("click touchstart",(function(t){if($pos=e(".isotope-div").offset().top,e("html, body").animate({scrollTop:$pos},"slow"),t.stopPropagation(),t.preventDefault(),$toggle.addClass("isotope-hide"),$article.addClass("isotope-open"),$article.removeClass("isotope-hide"),$article.height("auto"),$article.addClass("article-loading"),"ajax"==options.readmore){e("#isotope_an_article").html("");var a=e("#token").attr("name");e.ajax({data:{[a]:"1",task:"display",format:"json",article:this.dataset.articleid,entree:options.entree},success:function(e,t,a){$article.removeClass("article-loading"),$article.height($height),$article.width($width),e.success||(e.success=!0),displayArticle(e)},error:function(e){console.log(e.responseText)}})}else"iframe"==options.readmore&&(0==$height&&($height="100vh"),$article_frame.height(0),$article_frame.width(0),$char="?",this.dataset.href.indexOf("?")>0&&($char="&"),$article_frame.attr("src",this.dataset.href+$char+"tmpl=component"),$article.addClass("article-loading"),($close=e("button.close")).addClass("isotope-hide"),$close.on("click touchstart",resetToggle));$toggle.on("click touchstart",resetToggle)}))),e(".isotope-div").on("click touchstart",(function(){resetToggle()})),e(".isotope_button-group").on("click touchstart",(function(){resetToggle()})),resetToggle=function(){$toggle.hasClass("isotope-hide")?($article.removeClass("isotope-open"),$article.addClass("isotope-hide"),$toggle.removeClass("isotope-hide"),e(".isotope-main .isotope-div").trigger("refresh")):jQuery("#isotope_an_article").hasClass("isotope-open")&&(jQuery("#isotope_an_article").removeClass("isotope-open"),jQuery("#isotope_an_article").addClass("isotope-hide"),jQuery("#isotope_an_article").html(""),e(".isotope-main .isotope-div").trigger("refresh"))},$article_frame.on("load",(function(){$article.removeClass("article-loading"),$close&&$close.removeClass("isotope-hide"),$article_frame.height($height),$article_frame.width($width)})).show();var t,a,i=document.getElementById("filter-button-group-calendar");if(i){var s=document.getElementsByClassName("iso_calendar");$une_date=s[0],$margin_left=parseInt(document.defaultView.getComputedStyle($une_date,"").getPropertyValue("margin-left")),$margin_right=parseInt(document.defaultView.getComputedStyle($une_date,"").getPropertyValue("margin-right"));var l=$une_date.offsetWidth+$margin_left+$margin_right,o=Math.floor((i.offsetWidth-i.offsetLeft)/l),n=(i.offsetWidth-i.offsetLeft)%l-$margin_left-$margin_right;r(0),document.getElementById("prev-calendar").addEventListener("click",(function(){var e=null,t=0;function a(){t==2*o?clearInterval(e):(t++,i.scrollLeft-=l/2,r(Math.floor(i.scrollLeft/l)))}clearInterval(e),e=setInterval(a,20),i.scrollLeft-=n})),document.getElementById("next-calendar").addEventListener("click",(function(){var e=null,t=0;function a(){t==2*o?clearInterval(e):(t++,i.scrollLeft+=l/2,r(Math.floor(i.scrollLeft/l)))}clearInterval(e),e=setInterval(a,20),i.scrollLeft+=n}))}function r(e){$date_deb=new Date(s[e].dataset.sortValue),$month=$date_deb.toLocaleString("default",{month:"short"}),$month_left=document.getElementById("calendar_month_left"),$month_left.innerHTML=$month,$date_end=new Date($date_deb.toISOString().slice(0,10)),$date_end.setDate($date_end.getDate()+o),$month=$date_end.toLocaleString("default",{month:"short"}),$month_right=document.getElementById("calendar_month_right"),$month_right.innerHTML=$month}function c(e){e.touches&&(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY)}t=this,a=function(e){var t=window,a=document,s="mousemove touchmove",o="mouseup touchend",n="mousedown touchstart",d=[],u=function(e,u){for(e=0;e<d.length;)(u=(u=d[e++]).container||u).removeEventListener(n,u.md,0),o.split(" ").forEach((function(e){t.removeEventListener(e,u.mu,0)})),s.split(" ").forEach((function(e){t.removeEventListener(e,u.mm,0)}));for(d=[].slice.call(a.getElementsByClassName("dragscroll")),e=0;e<d.length;)!function(e,d,u,f,p,h){n.split(" ").forEach((function(t){(h=e.container||e).addEventListener(t,h.md=function(t){c(t),e.hasAttribute("nochilddrag")&&a.elementFromPoint(t.pageX,t.pageY)!=h||(f=1,d=t.clientX,t.clientY,t.preventDefault())},0)})),o.split(" ").forEach((function(e){t.addEventListener(e,h.mu=function(){f=0},0)})),s.split(" ").forEach((function(a){t.addEventListener(a,h.mm=function(t){c(t),f&&((e.scroller||e).scrollLeft-=-d+(d=t.clientX),r(Math.floor(i.scrollLeft/(l+2))))},0)}))}(d[e++])};"complete"==a.readyState?u():t.addEventListener("load",u,0),e.reset=u},"function"==typeof define&&define.amd?define(["exports"],a):"undefined"!=typeof exports?a(exports):a(t.dragscroll={})}));