var $close,$toggle,$article,$height,$width,$article_frame,resetToggle,options,myid,qsRegex,$asc,$sortby,filters,rangeSlider,range_init,range_sel,min_range,max_range,cookie_name;function displayArticle(e){var t="";if(e.success){for(var i=0;i<e.length;i++){if(t+="<h1>"+e[i].title+'<button type="button" class="close">X</button></h1>',"k2"==options.entree&&e[i].image&&(t+='<span class="itemImage"><a class="moduleItemImage" href="'+e[i].link+'">',t+='<img src="'+e[i].image+'" alt="'+e[i].title+'" /></a></span>'),t+=e[i].fulltext,""==e[i].fulltext&&(t+=e[i].introtext),"k2"==options.entree&&e[i].extra_fields){if(t+='<div class="itemExtraFields"><ul>',Array.isArray(e[i].extra_fields)){$l=e[i].extra_fields.length;for(var a=0;a<$l;a++)t+='<li class="typeTextfield">',t+='<span class="itemExtraFieldsLabel">'+e[i].extra_fields[a].name+"</span>",t+='<span class="itemExtraFieldsValue">'+e[i].extra_fields[a].value+"</span>",t+="</li>"}else for(var a in $l=Object.values(e[i].extra_fields).length,e[i].extra_fields)t+='<li class="typeTextfield">',t+='<span class="itemExtraFieldsLabel">'+e[i].extra_fields[a].name+"</span>",t+='<span class="itemExtraFieldsValue">'+e[i].extra_fields[a].value+"</span>",t+="</li>";t+="</ul></div>"}if(e[i].scripts.length>0)for(var s=0;s<e[i].scripts.length;s++){var l=document.createElement("script");l.addEventListener("load",function(){console.log("Successfully loaded scripts")}),l.src=e[i].scripts[s],document.head.appendChild(l)}if(e[i].css.length>0)for(s=0;s<e[i].css.length;s++){var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.addEventListener("load",function(){console.log("Successfully loaded css")}),r.href=e[i].css[s],document.head.appendChild(r)}}jQuery("#isotope_an_article").html(t),($close=jQuery("button.close")).on("click touchstart",resetToggle)}else if(t=e.message,e.messages&&e.messages.error)for(var o=0;o<e.messages.error.length;o++)t+="<br/>"+e.messages.error[o]}function iso_cat_k2(e,t,a){var s="#isotope-main-"+t+" ",l=a.limit_items,r=a.limit_items,o="true"==a.empty;if(filters={},$asc="true"==a.ascending,-1!==($sortby=a.sortby).indexOf("featured"))for(sortValue=$sortby.split(","),$asc={},i=0;i<sortValue.length;i++)"featured"==sortValue[i]?$asc[sortValue[i]]=!1:$asc[sortValue[i]]="true"==a.ascending;0==a.limit_items&&jQuery(s+".iso_button_more").hide(),""==a.default_cat||null==a.default_cat||void 0===a.default_cat?filters.cat=["*"]:filters.cat=[a.default_cat],""==a.default_tag||null==a.default_tag||void 0===a.default_tag?filters.tags=["*"]:filters.tags=[a.default_tag],filters.lang=["*"],filters.alpha=["*"],filters.calendar=["*"];var n=getCookie(cookie_name);""!=n&&($arr=n.split("&"),$arr.forEach(splitCookie)),"masonry"!=a.layout&&"fitRows"!=a.layout&&"packery"!=a.layout||e("#isotope-main-"+t+" .isotope_item").css("width",100/parseInt(a.nbcol)-2+"%"),"vertical"==a.layout&&e("#isotope-main-"+t+" .isotope_item").css("width","100%"),e("#isotope-main-"+t+" .isotope_item").css("background",a.background),parseInt(a.imgmaxheight)>0&&e("#isotope-main-"+t+" .isotope_item img").css("max-height",a.imgmaxheight+"px"),parseInt(a.imgmaxwidth)>0&&e("#isotope-main-"+t+" .isotope_item img").css("max-width",a.imgmaxwidth+"px"),"true"==a.displayrange&&(min_range||(min_range=parseInt(a.minrange),max_range=parseInt(a.maxrange)),rangeSlider=new rSlider({target:"#rSlider",values:{min:parseInt(a.minrange),max:parseInt(a.maxrange)},step:parseInt(a.rangestep),set:[min_range,max_range],range:!0,tooltip:!0,scale:!0,labels:!0,onChange:function(){range_sel=rangeSlider.getValue(),range_init=rangeSlider.conf.values[0]+","+rangeSlider.conf.values[rangeSlider.conf.values.length-1],CG_Cookie_Set(t,"range",range_sel),c.isotope()}})),"string"==typeof $sortby&&($sortby=$sortby.split(","));var c=e(s+".isotope_grid").imagesLoaded(function(e){c.isotope({itemSelector:s+".isotope_item",percentPosition:!0,layoutMode:a.layout,getSortData:{title:"[data-title]",category:"[data-category]",date:"[data-date]",click:"[data-click] parseInt",rating:"[data-rating] parseInt",id:"[data-id] parseInt",featured:"[data-featured] parseInt"},sortBy:$sortby,sortAscending:$asc,filter:function(e){return function(e){var t=!qsRegex||e.text().match(qsRegex),i=e.attr("data-category"),s=e.attr("class").split(" "),l=!1,r=!0,o=!1;if(-1==filters.alpha.indexOf("*")&&(alpha=e.attr("data-title").substring(0,1),-1==filters.alpha.indexOf(alpha)))return!1;if(-1==filters.lang.indexOf("*")&&(lalang=e.attr("data-lang"),-1==filters.lang.indexOf(lalang)))return!1;if(-1==filters.calendar.indexOf("*"))for(var n in lesdates=e.attr("data-calendar").split(" "),lesdates)-1!=filters.calendar.indexOf(lesdates[n])&&(o=!0);else o=!0;if(rangeSlider){var c=e.attr("data-range");range_sel!=range_init&&(ranges=range_sel.split(","),r=parseInt(c)>=parseInt(ranges[0])&&parseInt(c)<=parseInt(ranges[1]))}if("fields"!=a.article_cat_tag&&"catfields"!=a.article_cat_tag&&"tagsfields"!=a.article_cat_tag&&"cattagsfields"!=a.article_cat_tag){if(-1!=filters.cat.indexOf("*")&&-1!=filters.tags.indexOf("*"))return t&&r&&o;if(count=0,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(i))return!1;count=1}if(-1!=filters.tags.indexOf("*"))return t&&r&&o;for(var n in s)-1!=filters.tags.indexOf(s[n])&&(l=!0,count+=1);return"true"==a.searchmultiex?(lgth=filters.cat.length+filters.tags.length,-1==filters.tags.indexOf("*")&&-1==filters.cat.indexOf("*")||(lgth-=1),t&&r&&count==lgth&&o):t&&r&&l&&o}if(ix=0,void 0===filters)return t&&r&&o;for(x in filterslength=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&(filterslength++,-1!=filters[x].indexOf("*")&&ix++);if(catok=!1,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(i))return!1;catok=!0}else catok=!0;if(tagok=!1,-1==filters.tags.indexOf("*"))for(var n in s)-1!=filters.tags.indexOf(s[n])&&(tagok=!0);else tagok=!0;if(ix==filterslength&&catok&&tagok)return t&&r&&o;for(var d in count=0,s)for(x in filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&-1!=filters[x].indexOf(s[d])&&(count+=1);if("true"==a.searchmultiex){for(x in lgth=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&(lgth+=filters[x].length,-1!=filters[x].indexOf("*")&&(lgth-=1));return t&&r&&count==lgth&&tagok&&o}return t&&r&&count>=filterslength-ix&&catok&&tagok&&o}(jQuery(this))}}),v(),"random"==$sortby&&c.isotope("shuffle"),$width=$toggle.width(),$height=$toggle.height()});e(s+".isotope-div").on("refresh",function(){c.isotope()}),e(s+".sort-by-button-group").on("click","button",function(){var a=e(this).attr("data-sort-value");if("random"==a)return CG_Cookie_Set(t,"sort",a+"-"),void c.isotope("shuffle");for(sens=e(this).attr("data-sens"),a=a.split(","),e(this).hasClass("is-checked")?"-"==sens?(e(this).attr("data-sens","+"),asc=!0):(e(this).attr("data-sens","-"),asc=!1):(sens=e(this).attr("data-init"),e(this).attr("data-sens",sens),asc=!0,"-"==sens&&(asc=!1)),sortAsc={},i=0;i<a.length;i++)"featured"==a[i]?sortAsc[a[i]]=!1:sortAsc[a[i]]=asc;CG_Cookie_Set(t,"sort",a+"-"+asc),c.isotope({sortBy:a,sortAscending:sortAsc})}),e(s+".sort-by-button-group").each(function(t,i){var a=e(i);a.on("click","button",function(){a.find(".is-checked").removeClass("is-checked"),e(this).addClass("is-checked")})});var d=e(s+".quicksearch").keyup(debounce(function(){qsRegex=new RegExp(d.val(),"gi"),CG_Cookie_Set(t,"search",d.val()),c.isotope(),v()}));function f(e){$parent=e.attr("data-filter-group");var t=e.find(":selected").val();void 0===t&&(t=""),""==t?($selectid=e.attr("data-filter-group"),elChoice=document.querySelector("joomla-field-fancy-select#isotope-select-"+$selectid),choicesInstance=elChoice.choicesInstance,choicesInstance.setChoiceByValue(""),filters[$parent]=["*"]):filters[$parent]=[t],update_cookie_filter(filters),c.isotope(),v()}function u(e,t,i){$evnt=t,$params=i,$parent=e.parent().parent().parent().attr("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=[]),$selectid=e.attr("id");var a=document.querySelector("joomla-field-fancy-select#"+$selectid).choicesInstance;"remove"==$params&&(removeFilter(filters,$parent,$evnt.detail.value),0==filters[$parent].length&&(filters[$parent]=["*"],a.setChoiceByValue(""))),"choice"==$params&&(sel=$evnt.detail.choice.value,""==sel?(filters[$parent]=["*"],a.removeActiveItems(),a.setChoiceByValue("")):(-1!=filters[$parent].indexOf("*")&&(a.removeActiveItemsByValue(""),filters[$parent]=[]),addFilter(filters,$parent,sel)),a.hideDropdown()),update_cookie_filter(filters),c.isotope(),v()}function h(e){if(!e.hasClass("disabled")){$parent=e.parent().attr("data-filter-group"),child=e.attr("data-child");var t=e.attr("data-sort-value");void 0===filters[$parent]&&(filters[$parent]={}),"*"==t?(filters[$parent]=["*"],child&&set_family_all(s,child,"button")):(filters[$parent]=[t],child&&set_family(s,"",child,t,"button")),update_cookie_filter(filters),c.isotope(),v()}}function p(e){$parent=e.parent().attr("data-filter-group"),child=e.attr("data-child");var t=e.attr("data-sort-value");e.toggleClass("is-checked");var i=e.hasClass("is-checked");void 0===filters[$parent]&&(filters[$parent]=[]),"*"==t?(filters[$parent]=["*"],child&&set_family_all(s,child,"button")):(removeFilter(filters,$parent,"*"),removeFilter(filters,$parent,"none"),i?(addFilter(filters,$parent,t),child&&set_family(s,$parent,child,t,"button")):(removeFilter(filters,$parent,t),child&&(0==filters[$parent].length?(filters[$parent]=["*"],set_family_all(s,child,"button")):del_family(s,$parent,child,t,"button")))),update_cookie_filter(filters),c.isotope(),v()}function g(t){$parent=e(this).parent().attr("data-filter-group"),t.on("click touchstart","button",function(){e(this).hasClass("disabled")||(e(this).parent().find(".is-checked").removeClass("is-checked"),e(this).addClass("is-checked"))})}function m(t){t.on("click","button",function(){$parent=e(this).parent().attr("data-filter-group"),"*"==e(this).attr("data-sort-value")?(e(this).parent().find(".is-checked").removeClass("is-checked"),e(this).addClass("is-checked")):0==filters[$parent].length||"*"==filters[$parent]?(e(this).parent().find('[data-sort-value="*"]').addClass("is-checked"),filters[$parent]=["*"],update_cookie_filter(filters),c.isotope()):e(this).parent().find('[data-sort-value="*"]').removeClass("is-checked")})}function v(){jQuery(s+".isotope_item").hasClass("iso_hide_elem")&&jQuery(s+".isotope_item").removeClass("iso_hide_elem");var e=c.isotope("getFilteredItemElements"),t=jQuery(e).length;if(o&&(0==t?jQuery(s+".iso_div_empty").removeClass("iso_hide_elem"):jQuery(s+".iso_div_empty").hasClass("iso_hide_elem")||jQuery(s+".iso_div_empty").addClass("iso_hide_elem")),l>0){var i=0;jQuery(e).each(function(){i>=l&&jQuery(this).addClass("iso_hide_elem"),i++}),i<l?jQuery(s+".iso_button_more").hide():jQuery(s+".iso_button_more").show()}0==l&&r>0&&(jQuery(e).each(function(){jQuery(this).hasClass("iso_hide_elem")&&(t-=1)}),t>r?jQuery(s+".iso_button_more").show():jQuery(s+".iso_button_more").hide()),c.isotope()}e(s+".ison-cancel-squared").on("click",function(){e(s+".quicksearch").val(""),qsRegex=new RegExp(d.val(),"gi"),CG_Cookie_Set(t,"search",d.val()),rangeSlider&&(range_sel=range_init,ranges=range_sel.split(","),rangeSlider.setValues(parseInt(ranges[0]),parseInt(ranges[1])),CG_Cookie_Set(t,"range",range_sel)),filters.cat=["*"],filters.tags=["*"],filters.lang=["*"],filters.alpha=["*"],filters.calendar=["*"],e(s+".filter-button-group-cat").each(function(t,i){e(i).each(function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)})}),e(s+".filter-button-group-tags").each(function(t,i){e(i).each(function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)})}),e(s+".filter-button-group-fields").each(function(t,i){var a=e(i).attr("data-filter-group");filters[a]=["*"],e(this).find(".is-checked").removeClass("is-checked"),e(this).find(".iso_hide_elem").removeClass("iso_hide_elem"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)}),e(s+".iso_lang").each(function(t,i){e(i).each(function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)})}),e(s+".filter-button-group-alpha").each(function(t,i){e(i).each(function(){e(this).find(".is-checked").removeClass("is-checked"),e(this).find('[data-sort-value="*"]').addClass("is-checked"),e(this).find('[data-all="all"]').attr("selected",!0)})}),e(s+".filter-button-group-calendar").each(function(i,a){var s=e(a);CG_Cookie_Set(t,"calendar_pos",0),s.each(function(){e(this).find(".is-checked").removeClass("is-checked")})}),e(s+'select[id^="isotope-select-"]').each(function(t,i){$val=e(this).parent().parent().parent().attr("data-filter-group");var a=document.querySelector("joomla-field-fancy-select#isotope-select-"+$val).choicesInstance;a.removeActiveItems(),a.setChoiceByValue("")}),update_cookie_filter(filters),c.isotope(),v(),e(s+".quicksearch").focus()}),"listmulti"==a.displayfiltertags&&e(s+'select[id^="isotope-select-tags"]').each(function(t,i){e(i).on("choice",function(t,i){u(e(this),t,"choice")}),e(i).on("removeItem",function(t,i){u(e(this),t,"remove",t.detail)}),$parent=e(i).parent().parent().parent().attr("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=["*"])}),"listmulti"==a.displayfiltercat&&e(s+'select[id^="isotope-select-cat"]').each(function(t,i){e(i).on("choice",function(t,i){u(e(this),t,"choice")}),e(i).on("removeItem",function(t,i){u(e(this),t,"remove",t.detail)}),$parent=e(i).parent().parent().parent().attr("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=["*"])}),"listmulti"==a.displayfilterfields&&e(s+'select[id^="isotope-select-fields"]').each(function(t,i){e(i).on("choice",function(t,i){u(e(this),t,"choice")}),e(i).on("removeItem",function(t,i){u(e(this),t,"remove",t.detail)}),$parent=e(i).parent().parent().parent().attr("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=["*"])}),"list"!=a.displayfiltercat&&"listex"!=a.displayfiltercat||e(s+".filter-button-group-cat").on("change",function(){f(e(this))}),"list"!=a.displayfiltertags&&"listex"!=a.displayfiltertags||e(s+".filter-button-group-tags").on("change",function(){f(e(this))}),"list"!=a.displayfilterfields&&"listex"!=a.displayfilterfields||e(s+".filter-button-group-fields").on("change",function(){f(e(this))}),"multi"!=a.displayfiltercat&&"multiex"!=a.displayfiltercat||(e(s+".filter-button-group-cat").on("click","button",function(){p(e(this))}),e(s+".filter-button-group-cat").each(function(t,i){m(e(i))})),"multi"!=a.displayfiltertags&&"multiex"!=a.displayfiltertags||(e(s+".filter-button-group-tags").on("click","button",function(){p(e(this))}),e(s+".filter-button-group-tags").each(function(t,i){m(e(i))})),"multi"!=a.displayfilterfields&&"multiex"!=a.displayfilterfields||(e(s+".filter-button-group-fields").on("click","button",function(){p(e(this))}),e(s+".filter-button-group-fields").each(function(t,i){m(e(i))})),"multi"==a.language_filter&&(e(s+".iso_lang").on("click","button",function(){p(e(this))}),e(s+".iso_lang").each(function(t,i){m(e(i))})),"multi"==a.displayalpha&&(e(s+".filter-button-group-alpha").on("click","button",function(){p(e(this))}),e(s+".filter-button-group-alpha").each(function(t,i){m(e(i))})),"button"==a.displayfiltercat&&(e(s+".filter-button-group-cat").on("click","button",function(){h(e(this))}),e(s+".filter-button-group-cat").each(function(t,i){g(e(i))})),"button"==a.displayfiltertags&&(e(s+".filter-button-group-tags").on("click","button",function(){h(e(this))}),e(s+".filter-button-group-tags").each(function(t,i){g(e(i))})),"button"==a.displayfilterfields&&(e(s+".filter-button-group-fields").on("click","button",function(){h(e(this))}),e(s+".filter-button-group-fields").each(function(t,i){g(e(i))})),"button"==a.language_filter&&(e(s+".iso_lang").on("click","button",function(){h(e(this))}),e(s+".iso_lang").each(function(t,i){g(e(i))})),e(s+".filter-button-group-calendar").on("click touchstart","button",function(){if(h(e(this)),e(this).hasClass("has_date")){var i=document.getElementById("filter-button-group-calendar");CG_Cookie_Set(t,"calendar_pos",i.scrollLeft)}}),e(s+".filter-button-group-calendar").each(function(t,i){g(e(i))}),"button"==a.displayalpha&&(e(s+".filter-button-group-alpha").on("click","button",function(){h(e(this))}),e(s+".filter-button-group-alpha").each(function(t,i){g(e(i))})),e(s+".iso_button_more").on("click",function(t){t.preventDefault(),l>0?(l=0,e(this).text(a.libless)):(l=a.limit_items,e(this).text(a.libmore)),v()})}function debounce(e,t){var i;return function(){i&&clearTimeout(i),i=setTimeout(function(){e(),i=null},t||100)}}function addFilter(e,t,i){-1==e[t].indexOf(i)&&e[t].push(i)}function removeFilter(e,t,i){var a=e[t].indexOf(i);-1!=a&&e[t].splice(a,1)}function update_cookie_filter(e){for(x in $filter_cookie="",e)$filter_cookie.length>0&&($filter_cookie+=">"),$filter_cookie+=x+"<"+e[x].toString();$filter_cookie.length>0&&($filter_cookie+=">"),CG_Cookie_Set(myid,"filter",$filter_cookie)}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}function CG_Cookie_Set(e,t,i){$secure="","https:"==window.location.protocol&&($secure="secure;"),lecookie=getCookie(cookie_name),$val=t+":"+i,$cook=$val,""!=lecookie&&(lecookie.indexOf(t)>=0?($cook="",$arr=lecookie.split("&"),$arr.forEach(replaceCookie,$val)):$cook=lecookie+"&"+$val),document.cookie=cookie_name+"="+$cook+"; path=/; samesite=lax;"+$secure}function replaceCookie(e,t,i){this.startsWith("search:")&&e.indexOf("search:")>=0&&(i[t]=this),this.startsWith("sort:")&&e.indexOf("sort:")>=0&&(i[t]=this),this.startsWith("filter:")&&e.indexOf("filter:")>=0&&(i[t]=this),this.startsWith("range:")&&e.indexOf("range:")>=0&&(i[t]=this),this.startsWith("calendar_pos:")&&e.indexOf("calendar_pos:")>=0&&(i[t]=this),$cook.length>0&&($cook+="&"),$cook+=i[t]}function splitCookie(e){if(me="#isotope-main-"+myid+" ",e.indexOf("search:")>=0&&jQuery(me+".quicksearch").len>0&&(val=e.split(":"),qsRegex=new RegExp(val[1],"gi"),jQuery(me+".quicksearch").val(val[1])),e.indexOf("sort:")>=0){for(val=e.split(":"),val=val[1].split("-"),$sortby=val[0].split(","),$asc="true"==val[1],sortAsc={},i=0;i<$sortby.length;i++)"featured"==$sortby[i]?sortAsc[$sortby[i]]=!1:sortAsc[$sortby[i]]=$asc;$asc=sortAsc,jQuery(me+".sort-by-button-group").each(function(e,t){var i=jQuery(t);"*"!=val[0]&&(i.find(".is-checked").removeClass("is-checked"),i.children().each(function(e,t){jQuery(this).attr("data-sort-value")==val[0]&&(jQuery(this).addClass("is-checked"),jQuery(this).attr("data-sens","+"),"true"!=val[1]&&jQuery(this).attr("data-sens","-"))}))})}if(e.indexOf("filter:")>=0&&(val=e.split(":"),val[1].length>0))for(val=val[1].split(">"),x=0;x<val.length-1;x++)if(values=val[x].split("<"),"cat"==values[0]||"tags"==values[0]||"lang"==values[0]||"alpha"==values[0]){if("tags"==values[0]&&"listmulti"==options.displayfiltertags||"cat"==values[0]&&"listmulti"==options.displayfiltercat){var t=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0]).choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c])}else if("*"!=values[1])for(filters[values[0]]=values[1].split(","),"lang"==values[0]?jQuery(me+".iso_lang").find(".is-checked").removeClass("is-checked"):jQuery(me+".filter-button-group-"+values[0]).find(".is-checked").removeClass("is-checked"),v=0;v<filters[values[0]].length;v++)"tags"==values[0]&&"list"==options.displayfiltertags&&"tagsfields"!=options.article_cat_tag&&"cattagsfields"!=options.article_cat_tag||"cat"==values[0]&&"list"==options.displayfiltercat?jQuery(me+".filter-button-group-"+values[0]+" .isotope_select").val(filters[values[0]][v]).attr("selected",!0):jQuery(me+".iso_button_"+values[0]+"_"+filters[values[0]][v]).addClass("is-checked")}else if("calendar"==values[0])"*"!=values[1]&&jQuery(me+".iso_button_calendar_"+values[1]).addClass("is-checked");else if("listmulti"==options.displayfilterfields){t=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0]).choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c])}else if("*"!=values[1])for(jQuery(me+".class_fields_"+values[0]).find(".is-checked").removeClass("is-checked"),filters[values[0]]=values[1].split(","),v=0;v<filters[values[0]].length;v++)"list"==options.displayfilterfields||"listex"==options.displayfilterfields?($this=jQuery(me+".class_fields_"+values[0]+" .isotope_select").val(filters[values[0]][v]),$this.attr("selected",!0),child=$this.find(":selected").attr("data-child"),child&&(sortValue=filters[values[0]][v],set_family(me,"",child,sortValue,"list"))):($this=jQuery(me+".iso_button_"+values[0]+"_"+filters[values[0]][v]),$this.addClass("is-checked"),child=$this.attr("data-child"),child&&(sortValue=$this.attr("data-sort-value"),set_family(me,"",child,sortValue,"button")));e.indexOf("range:")>=0&&(val=e.split(":"),val[1].length>0&&(spl=val[1].split(","),min_range=parseInt(spl[0]),max_range=parseInt(spl[1]))),e.indexOf("calendar_pos:")>=0&&(val=e.split(":"),val[1].length>0&&(cal_container=document.getElementById("filter-button-group-calendar"),cal_container.scrollLeft=val[1]))}function set_family(e,t,i,a,s){for(parents=[];i;){if("list"==s?($this=jQuery(e+".filter-button-group-fields").find('[data-group-id="'+i+'"]'),$this.find("option").addClass("iso_hide_elem"),i=$this.find('[data-all="all"]').removeClass("iso_hide_elem").attr("selected",!0).attr("data-child")):($this=jQuery(e+".filter-button-group-fields").parent().find('[data-group-id="'+i+'"]'),(""==t||""!=t&&1==filters[t].length&&"*"!=filters[t])&&$this.find("button").addClass("iso_hide_elem").removeClass("is-checked"),i=$this.find("button.iso_button_tout").removeClass("iso_hide_elem").addClass("is-checked").attr("data-child")),0==parents.length){if($this.find('[data-parent="'+a+'"]').removeClass("iso_hide_elem"),newparents=$this.find('[data-parent="'+a+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)$val="list"==s?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=$val&&parents.push($val)}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(a=parents[$i])&&($this.find('[data-parent="'+a+'"]').removeClass("iso_hide_elem"),$vals=$this.find('[data-parent="'+a+'"]'),$vals.length>0))for($j=0;$j<$vals.length;$j++)$val="list"==s?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=$val&&newparents.push($val);parents=newparents}childstr=$this.attr("data-filter-group"),filters[childstr]=["*"],a=""}}function del_family(e,t,i,a,s){for(parents=[];i;){if($this=jQuery(e+".filter-button-group-fields").parent().find('[data-group-id="'+i+'"]'),$this.find('[data-parent="'+a+'"]').addClass("iso_hide_elem").removeClass("is-checked"),i=$this.find("button.iso_button_tout").removeClass("iso_hide_elem").addClass("is-checked").attr("data-child"),0==parents.length){if(newparents=$this.find('[data-parent="'+a+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)$val="list"==s?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=$val&&(parents.push($val),newparents[$i].addClass("iso_hide_elem"))}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(a=parents[$i])&&($vals=$this.find('[data-parent="'+a+'"]'),$vals.length>0))for($j=0;$j<$vals.length;$j++)$val="list"==s?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=$val&&(newparents.push($val),$vals[$j].addClass("iso_hide_elem"));parents=newparents}childstr=$this.attr("data-filter-group"),filters[childstr]=["*"],a=""}}function set_family_all(e,t,i){for(parents=[];t;){for($this="list"==i?jQuery(e+".filter-button-group-fields"):jQuery(e+".filter-button-group-fields").parent(),parents=$this.find('[data-child="'+t+'"]'),$i=0;$i<parents.length;$i++)jQuery(parents[$i]).hasClass("iso_hide_elem")||($val="list"==i?parents[$i].getAttribute("value"):parents[$i].getAttribute("data-sort-value"),$val&&"*"!=$val&&$this.find('[data-parent="'+$val+'"]').removeClass("iso_hide_elem"));"list"==i?t=$this.find('[data-group-id="'+t+'"]').find('[data-all="all"]').attr("data-child"):($this.find('[data-group-id="'+t+'"]').find("button").removeClass("is-checked"),$this.find('[data-group-id="'+t+'"]').find("button.iso_button_tout").addClass("is-checked"),$this=jQuery(e+".filter-button-group-fields").parent().find('[data-group-id="'+t+'"]'),t=$this.find("button.iso_button_tout").attr("data-child")),childstr=$this.attr("data-filter-group"),filters[childstr]=["*"]}}function go_click(e,t){event.preventDefault(),"webLinks"==e||window.event.ctrlKey?window.open(t,"_blank"):location=t}jQuery(document).ready(function(e){e(".isotope-main").each(function(){var t=e(this);return myid=t.attr("data"),"undefined"==typeof Joomla||void 0===Joomla.getOptions?(console.error("Joomla.getOptions not found!\nThe Joomla core.js file is not being loaded."),!1):void 0!==(options=Joomla.getOptions("cg_isotope_"+myid))&&(cookie_name="cg_isotope_"+myid,void iso_cat_k2(e,myid,options))}),$toggle=jQuery(".isotope_grid"),$article=jQuery(".isotope_an_article"),$article_frame=jQuery("iframe#isotope_article_frame"),"ajax"!=options.readmore&&"iframe"!=options.readmore||($height=$toggle.height(),$width=$toggle.width(),e(".isotope-readmore-title").on("click touchstart",function(t){if($pos=e(".isotope-div").offset().top,e("html, body").animate({scrollTop:$pos},"slow"),t.stopPropagation(),t.preventDefault(),$toggle.addClass("isotope-hide"),$article.addClass("isotope-open"),$article.removeClass("isotope-hide"),$article.height("auto"),$article.addClass("article-loading"),"ajax"==options.readmore){e("#isotope_an_article").html("");var i=e("#token").attr("name");e.ajax({data:{[i]:"1",task:"display",format:"json",article:this.dataset.articleid,entree:options.entree},success:function(e,t,i){$article.removeClass("article-loading"),$article.height($height),$article.width($width),e.success||(e.success=!0),displayArticle(e)},error:function(e){console.log(e.responseText)}})}else"iframe"==options.readmore&&(0==$height&&($height="100vh"),$article_frame.height(0),$article_frame.width(0),$char="?",this.dataset.href.indexOf("?")>0&&($char="&"),$article_frame.attr("src",this.dataset.href+$char+"tmpl=component"),$article.addClass("article-loading"),($close=e("button.close")).addClass("isotope-hide"),$close.on("click touchstart",resetToggle));$toggle.on("click touchstart",resetToggle)})),e(".isotope-div").on("click touchstart",function(){resetToggle()}),e(".isotope_button-group").on("click touchstart",function(){resetToggle()}),resetToggle=function(){$toggle.hasClass("isotope-hide")?($article.removeClass("isotope-open"),$article.addClass("isotope-hide"),$toggle.removeClass("isotope-hide"),e(".isotope-main .isotope-div").trigger("refresh")):jQuery("#isotope_an_article").hasClass("isotope-open")&&(jQuery("#isotope_an_article").removeClass("isotope-open"),jQuery("#isotope_an_article").addClass("isotope-hide"),jQuery("#isotope_an_article").html(""),e(".isotope-main .isotope-div").trigger("refresh"))},$article_frame.on("load",function(){$article.removeClass("article-loading"),$close&&$close.removeClass("isotope-hide"),$article_frame.height($height),$article_frame.width($width)}).show();var t,i,a=document.getElementById("filter-button-group-calendar");if(a){var s=document.getElementsByClassName("iso_calendar");$une_date=s[0],$margin_left=parseInt(document.defaultView.getComputedStyle($une_date,"").getPropertyValue("margin-left")),$margin_right=parseInt(document.defaultView.getComputedStyle($une_date,"").getPropertyValue("margin-right"));var l=$une_date.offsetWidth+$margin_left+$margin_right,r=Math.floor((a.offsetWidth-a.offsetLeft)/l),o=(a.offsetWidth-a.offsetLeft)%l-$margin_left-$margin_right;n(0),document.getElementById("prev-calendar").addEventListener("click",function(){var e=null,t=0;clearInterval(e),e=setInterval(function(){t==2*r?clearInterval(e):(t++,a.scrollLeft-=l/2,n(Math.floor(a.scrollLeft/l)))},20),a.scrollLeft-=o}),document.getElementById("next-calendar").addEventListener("click",function(){var e=null,t=0;clearInterval(e),e=setInterval(function(){t==2*r?clearInterval(e):(t++,a.scrollLeft+=l/2,n(Math.floor(a.scrollLeft/l)))},20),a.scrollLeft+=o})}function n(e){$date_deb=new Date(s[e].dataset.sortValue),$month=$date_deb.toLocaleString("default",{month:"short"}),$month_left=document.getElementById("calendar_month_left"),$month_left.innerHTML=$month,$date_end=new Date($date_deb.toISOString().slice(0,10)),$date_end.setDate($date_end.getDate()+r),$month=$date_end.toLocaleString("default",{month:"short"}),$month_right=document.getElementById("calendar_month_right"),$month_right.innerHTML=$month}function c(e){e.touches&&(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY)}t=this,i=function(e){var t=window,i=document,s=[],r=function(e,r){for(e=0;e<s.length;)(r=(r=s[e++]).container||r).removeEventListener("mousedown touchstart",r.md,0),"mouseup touchend".split(" ").forEach(function(e){t.removeEventListener(e,r.mu,0)}),"mousemove touchmove".split(" ").forEach(function(e){t.removeEventListener(e,r.mm,0)});for(s=[].slice.call(i.getElementsByClassName("dragscroll")),e=0;e<s.length;)!function(e,s,r,o,d,f){"mousedown touchstart".split(" ").forEach(function(t){(f=e.container||e).addEventListener(t,f.md=function(t){c(t),e.hasAttribute("nochilddrag")&&i.elementFromPoint(t.pageX,t.pageY)!=f||(o=1,s=t.clientX,t.clientY,t.preventDefault())},0)}),"mouseup touchend".split(" ").forEach(function(e){t.addEventListener(e,f.mu=function(){o=0},0)}),"mousemove touchmove".split(" ").forEach(function(i){t.addEventListener(i,f.mm=function(t){c(t),o&&((e.scroller||e).scrollLeft-=-s+(s=t.clientX),n(Math.floor(a.scrollLeft/(l+2))))},0)})}(s[e++])};"complete"==i.readyState?r():t.addEventListener("load",r,0),e.reset=r},"function"==typeof define&&define.amd?define(["exports"],i):"undefined"!=typeof exports?i(exports):i(t.dragscroll={})});