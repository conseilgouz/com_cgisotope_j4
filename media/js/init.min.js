var $close,$toggle,$article,$height,$width,$article_frame,resetToggle,options,myid,qsRegex,$asc,$sortby,filters,rangeSlider,range_init,range_sel,min_range,max_range,cookie_name;function displayArticle(a){var c="";if(a.success){for(var b=0;b<a.length;b++){if(c+="<h1>"+a[b].title+'<button type="button" class="close">X</button></h1>',"k2"==options.entree&&a[b].image&&(c+='<span class="itemImage"><a class="moduleItemImage" href="'+a[b].link+'">',c+='<img src="'+a[b].image+'" alt="'+a[b].title+'" /></a></span>'),c+=a[b].fulltext,""==a[b].fulltext&&(c+=a[b].introtext),"k2"==options.entree&&a[b].extra_fields){if(c+='<div class="itemExtraFields"><ul>',Array.isArray(a[b].extra_fields)){$l=a[b].extra_fields.length;for(var d=0;d<$l;d++)c+='<li class="typeTextfield">',c+='<span class="itemExtraFieldsLabel">'+a[b].extra_fields[d].name+"</span>",c+='<span class="itemExtraFieldsValue">'+a[b].extra_fields[d].value+"</span>",c+="</li>"}else for(var d in $l=Object.values(a[b].extra_fields).length,a[b].extra_fields)c+='<li class="typeTextfield">',c+='<span class="itemExtraFieldsLabel">'+a[b].extra_fields[d].name+"</span>",c+='<span class="itemExtraFieldsValue">'+a[b].extra_fields[d].value+"</span>",c+="</li>";c+="</ul></div>"}if(a[b].scripts.length>0)for(var e=0;e<a[b].scripts.length;e++){var g=document.createElement("script");g.addEventListener("load",function(){console.log("Successfully loaded scripts")}),g.src=a[b].scripts[e],document.head.appendChild(g)}if(a[b].css.length>0)for(var e=0;e<a[b].css.length;e++){var f=document.createElement("link");f.type="text/css",f.rel="stylesheet",f.addEventListener("load",function(){console.log("Successfully loaded css")}),f.href=a[b].css[e],document.head.appendChild(f)}}jQuery("#isotope_an_article").html(c),($close=jQuery("button.close")).on("click touchstart",resetToggle)}else if(c=a.message,a.messages&&a.messages.error)for(var h=0;h<a.messages.error.length;h++)c+="<br/>"+a.messages.error[h]}function iso_cat_k2($,c,a){var b="#isotope-main-"+c+" ",h=a.limit_items,i=a.limit_items,j="true"==a.empty;if(filters={},$asc="true"==a.ascending,$sortby=a.sortby,-1!==$sortby.indexOf("featured"))for(i=0,sortValue=$sortby.split(","),$asc={};i<sortValue.length;i++)"featured"==sortValue[i]?$asc[sortValue[i]]=!1:$asc[sortValue[i]]="true"==a.ascending;0==a.limit_items&&jQuery(b+".iso_button_more").hide(),""==a.default_cat||null==a.default_cat|| void 0===a.default_cat?filters.cat=["*"]:filters.cat=[a.default_cat],""==a.default_tag||null==a.default_tag|| void 0===a.default_tag?filters.tags=["*"]:filters.tags=[a.default_tag],filters.lang=["*"],filters.alpha=["*"],filters.calendar=["*"];var e=getCookie(cookie_name);""!=e&&($arr=e.split("&")).forEach(splitCookie),("masonry"==a.layout||"fitRows"==a.layout||"packery"==a.layout)&&$("#isotope-main-"+c+" .isotope_item").css("width",100/parseInt(a.nbcol)-2+"%"),"vertical"==a.layout&&$("#isotope-main-"+c+" .isotope_item").css("width","100%"),$("#isotope-main-"+c+" .isotope_item").css("background",a.background),parseInt(a.imgmaxheight)>0&&$("#isotope-main-"+c+" .isotope_item img").css("max-height",a.imgmaxheight+"px"),parseInt(a.imgmaxwidth)>0&&$("#isotope-main-"+c+" .isotope_item img").css("max-width",a.imgmaxwidth+"px"),"true"==a.displayrange&&(min_range||(min_range=parseInt(a.minrange),max_range=parseInt(a.maxrange)),rangeSlider=new rSlider({target:"#rSlider",values:{min:parseInt(a.minrange),max:parseInt(a.maxrange)},step:parseInt(a.rangestep),set:[min_range,max_range],range:!0,tooltip:!0,scale:!0,labels:!0,onChange:function(){range_sel=rangeSlider.getValue(),range_init=rangeSlider.conf.values[0]+","+rangeSlider.conf.values[rangeSlider.conf.values.length-1],CG_Cookie_Set(c,"range",range_sel),d.isotope()}})),"string"==typeof $sortby&&($sortby=$sortby.split(","));var d=$(b+".isotope_grid").isotope({itemSelector:"none",percentPosition:!0,layoutMode:a.layout,getSortData:{title:"[data-title]",category:"[data-category]",date:"[data-date]",click:"[data-click] parseInt",rating:"[data-rating] parseInt",id:"[data-id] parseInt",featured:"[data-featured] parseInt"},sortBy:$sortby,sortAscending:$asc,filter:function($){return n(jQuery(this))}});if(d.imagesLoaded(function(){d.isotope("option",{itemSelector:".isotope_item"});var a=d.find(".isotope_item");d.isotope("appended",a),u(),"random"==$sortby?d.isotope("shuffle"):d.isotope(),$width=$toggle.width(),$height=$toggle.height()}),$(b+".isotope-div").on("refresh",function(){d.isotope()}),"infinite"==a.pagination){var f=d.data("isotope");if(d.infiniteScroll({path:function(){return"?start="+((currentpage=this.loadCount)+1)*a.page_count},append:".isotope_item",outlayer:f,status:".page-load-status"}),"true"==a.infinite_btn){d.infiniteScroll("option",{button:".iso_button_more",loadOnScroll:!1});let g=$(".iso_button_more");jQuery(b+".iso_button_more").show(),g.on("click",function(){d.infiniteScroll("loadNextPage"),d.infiniteScroll("option",{loadOnScroll:!0}),g.hide()})}else jQuery(b+".iso_div_more").hide();d.on("append.infiniteScroll",function(b,c,d,a,e){m(a)})}$("#offcanvas-hamburger-btn").on("click",function(){var a=function(c,b=!1){!1===b||b>0?(!1!=b&&b--,setTimeout(function(){a(c,b)},100)):(rangeSlider.onResize(),c())};a(function(){jQuery(".offcanvas")},3)}),$(b+".sort-by-button-group").on("click","button",function(){l($(this))}),$(b+".sort-by-button-group").each(function(c,a){var b=$(a);b.on("click","button",function(){b.find(".is-checked").removeClass("is-checked"),$(this).addClass("is-checked")})});var k=$(b+".quicksearch").keyup(debounce(function(){qsRegex=new RegExp(k.val(),"gi"),CG_Cookie_Set(c,"search",k.val()),d.isotope(),u()}));function l(b){var a=b.attr("data-sort-value");if("random"==a){CG_Cookie_Set(c,"sort",a+"-"),d.isotope("shuffle");return}for(sens=b.attr("data-sens"),a=a.split(","),b.hasClass("is-checked")?"-"==sens?(b.attr("data-sens","+"),asc=!0):(b.attr("data-sens","-"),asc=!1):(sens=b.attr("data-init"),b.attr("data-sens",sens),asc=!0,"-"==sens&&(asc=!1)),sortAsc={},i=0;i<a.length;i++)"featured"==a[i]?sortAsc[a[i]]=!1:sortAsc[a[i]]=asc;CG_Cookie_Set(c,"sort",a+"-"+asc),d.isotope({sortBy:a,sortAscending:sortAsc})}function m(c){if("false"!=a.displayalpha)for(x=0;x<c.length-1;x++)alpha=c[x].attributes["data-alpha"].value,0==$(b+".filter-button-group-alpha").find(".iso_button_alpha_"+alpha).length&&$(b+".filter-button-group-alpha").append('<button class="'+a.button_bootstrap+" iso_button_alpha_"+alpha+'" data-sort-value="'+alpha+'" title="'+alpha+'">'+alpha+"</button>")}function n(e){var d=!qsRegex||e.text().match(qsRegex),h=e.attr("data-category"),f=e.attr("class").split(" "),i=!1,c=!0,b=!1;if(-1==filters.alpha.indexOf("*")&&(alpha=e.attr("data-title").substring(0,1),-1==filters.alpha.indexOf(alpha))|| -1==filters.lang.indexOf("*")&&(lalang=e.attr("data-lang"),-1==filters.lang.indexOf(lalang)))return!1;if(-1==filters.calendar.indexOf("*"))for(var g in lesdates=e.attr("data-calendar").split(" "))-1!=filters.calendar.indexOf(lesdates[g])&&(b=!0);else b=!0;if(rangeSlider){var j=e.attr("data-range");range_sel!=range_init&&(ranges=range_sel.split(","),c=parseInt(j)>=parseInt(ranges[0])&&parseInt(j)<=parseInt(ranges[1]))}if("fields"!=a.article_cat_tag&&"catfields"!=a.article_cat_tag&&"tagsfields"!=a.article_cat_tag&&"cattagsfields"!=a.article_cat_tag){if(-1!=filters.cat.indexOf("*")&& -1!=filters.tags.indexOf("*"))return d&&c&&b;if(count=0,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(h))return!1;count=1}if(-1!=filters.tags.indexOf("*"))return d&&c&&b;for(var g in f)-1!=filters.tags.indexOf(f[g])&&(i=!0,count+=1);return"true"==a.searchmultiex?(lgth=filters.cat.length+filters.tags.length,(-1!=filters.tags.indexOf("*")|| -1!=filters.cat.indexOf("*"))&&(lgth-=1),d&&c&&count==lgth&&b):d&&c&&i&&b}if(ix=0,void 0===filters)return d&&c&&b;for(x in filterslength=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&(filterslength++,-1!=filters[x].indexOf("*")&&ix++);if(catok=!1,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(h))return!1;catok=!0}else catok=!0;if(tagok=!1,-1==filters.tags.indexOf("*"))for(var g in f)-1!=filters.tags.indexOf(f[g])&&(tagok=!0);else tagok=!0;if(ix==filterslength&&catok&&tagok)return d&&c&&b;for(var k in count=0,f)for(x in filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&& -1!=filters[x].indexOf(f[k])&&(count+=1);if("true"!=a.searchmultiex)return d&&c&&count>=filterslength-ix&&catok&&tagok&&b;for(x in lgth=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&"calendar"!=x&&(lgth+=filters[x].length,-1!=filters[x].indexOf("*")&&(lgth-=1));return d&&c&&count==lgth&&tagok&&b}function o(b){$parent=b.attr("data-filter-group"),$isclone=!1,"offcanvas-clone"==b.parent()[0].id?($selectid=$parent,$isclone=!0):$selectid=b.attr("data-filter-group");var a=b.find(":selected").val();void 0===a&&(a=""),choicesInstance=(elChoice=document.querySelector("joomla-field-fancy-select#isotope-select-"+$selectid)).choicesInstance,$needclone=!1,"offcanvas-body"==($grdparent=b.parent())[0].className&&($needclone=!0),""==a?(choicesInstance.removeActiveItems(),choicesInstance.setChoiceByValue(""),filters[$parent]=["*"],$("#offcanvas-clone").find('[data-filter-group="'+$parent+'"]').remove()):(filters[$parent]=[a],$needclone&&($("#offcanvas-clone").find('[data-filter-group="'+$parent+'"]').remove(),$('<button class="btn btn-sm iso_button_'+$parent+"_"+a+' is-checked" data-sort-value="'+a+'" title="'+(lib=choicesInstance.getValue().label)+'" data-filter-group="'+$parent+'" data-clone-type="list">'+lib+"</button>").prependTo("#offcanvas-clone"))),update_cookie_filter(filters),d.isotope(),u()}function p(b,e,f){$evnt=e,$params=f,$isclone=!1,"offcanvas-clone"==b.parent()[0].id?($selectid="isotope-select-"+($parent=b.attr("data-filter-group")),$isclone=!0):($parent=b.parent().parent().parent().attr("data-filter-group"),$selectid=b.attr("id")),void 0===filters[$parent]&&(filters[$parent]=[]);var a=document.querySelector("joomla-field-fancy-select#"+$selectid).choicesInstance;if("remove"==$params){if($isclone){removeFilter(filters,$parent,b.attr("data-sort-value")),savfilter=JSON.parse(JSON.stringify(filters)),a.removeActiveItems(),filters=JSON.parse(JSON.stringify(savfilter)),a.removeActiveItemsByValue("");for(var c=0;c<filters[$parent].length;c++)$val=filters[$parent][c],a.setChoiceByValue($val)}else removeFilter(filters,$parent,$evnt.detail.value);0==filters[$parent].length&&(filters[$parent]=["*"],a.setChoiceByValue(""))}$needclone=!1,"offcanvas-body"==($grdparent=b.parent().parent())[0].className&&($needclone=!0),"choice"==$params&&(sel=$evnt.detail.choice.value,lib=$evnt.detail.choice.label,""==sel?(filters[$parent]=["*"],a.removeActiveItems(),a.setChoiceByValue(""),$("#offcanvas-clone").find('[data-filter-group="'+$parent+'"]').remove()):(-1!=filters[$parent].indexOf("*")&&(a.removeActiveItemsByValue(""),filters[$parent]=[]),$needclone&&$('<button class="btn btn-sm iso_button_'+$parent+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+$parent+'" data-clone-type="list_multi">'+lib+"</button>").prependTo("#offcanvas-clone"),addFilter(filters,$parent,sel)),a.hideDropdown()),update_cookie_filter(filters),d.isotope(),u()}function q(a){if(!a.hasClass("disabled")){$parent=a.parent().attr("data-filter-group"),child=a.attr("data-child");var c=a.attr("data-sort-value");if($isclone=!1,"offcanvas-clone"==a.parent()[0].id&&($(".iso_button_"+($parent=a.attr("data-filter-group"))+"_"+c).toggleClass("is-checked"),$(".iso_button_"+$parent+"_"+(c="*")).toggleClass("is-checked"),$isclone=!0),void 0===filters[$parent]&&(filters[$parent]={}),$needclone=!1,"offcanvas-body"==($grdparent=a.parent().parent())[0].className&&($needclone=!0),$needclone){if(a.hasClass("is-checked"))return;if($("#offcanvas-clone").find('[data-filter-group="'+$parent+'"]').remove(),"*"!=c){let e=a.clone(!0).prependTo("#offcanvas-clone");e.attr("data-filter-group",$parent),e.attr("data-child",child),e.attr("data-clone-type","button"),e.toggleClass("is-checked")}}"*"==c?(filters[$parent]=["*"],$isclone&&$(".filter-button-group-"+$parent).find('[data-sort-value="*"]').addClass("is-checked"),child&&set_family_all(b,child,"button")):(filters[$parent]=[c],child&&set_family(b,"",child,c,"button")),update_cookie_filter(filters),d.isotope(),u()}}function r(a){var c=a.attr("data-sort-value");child=a.attr("data-child"),$isclone=!1,"offcanvas-clone"==a.parent()[0].id?($(".iso_button_"+($parent=a.attr("data-filter-group"))+"_"+c).toggleClass("is-checked"),$isclone=!0):($parent=a.parent().attr("data-filter-group"),a.toggleClass("is-checked"));var f=a.hasClass("is-checked");if($needclone=!1,"offcanvas-body"==($grdparent=a.parent().parent())[0].className&&($needclone=!0),$needclone){if(f){let e=a.clone(!0).prependTo("#offcanvas-clone");e.attr("data-filter-group",$parent),e.attr("data-child",child),e.attr("data-clone-type","multi")}else $("#offcanvas-clone .iso_button_"+$parent+"_"+c).remove()}void 0===filters[$parent]&&(filters[$parent]=[]),"*"==c?(filters[$parent]=["*"],$("#offcanvas-clone").find('[data-filter-group="'+$parent+'"]').remove(),child&&set_family_all(b,child,"button")):(removeFilter(filters,$parent,"*"),removeFilter(filters,$parent,"none"),f?(addFilter(filters,$parent,c),child&&set_family(b,$parent,child,c,"button")):(removeFilter(filters,$parent,c),0==filters[$parent].length&&(filters[$parent]=["*"],$isclone&&$(".filter-button-group-"+$parent).find('[data-sort-value="*"]').addClass("is-checked")),child&&(filters[$parent]==["*"]?set_family_all(b,child,"button"):del_family(b,$parent,child,c,"button")))),update_cookie_filter(filters),d.isotope(),u()}function s(a){$parent=$(this).parent().attr("data-filter-group"),a.on("click touchstart","button",function(){$(this).hasClass("disabled")||($(this).parent().find(".is-checked").removeClass("is-checked"),$(this).addClass("is-checked"))})}function t(a){a.on("click","button",function(){$parent=$(this).parent().attr("data-filter-group"),"*"==$(this).attr("data-sort-value")?($(this).parent().find(".is-checked").removeClass("is-checked"),$(this).addClass("is-checked")):0==filters[$parent].length||"*"==filters[$parent]?($(this).parent().find('[data-sort-value="*"]').addClass("is-checked"),filters[$parent]=["*"],update_cookie_filter(filters),d.isotope()):$(this).parent().find('[data-sort-value="*"]').removeClass("is-checked")})}function u(){jQuery(b+".isotope_item").hasClass("iso_hide_elem")&&jQuery(b+".isotope_item").removeClass("iso_hide_elem");var c=d.isotope("getFilteredItemElements"),e=jQuery(c).length;if(j&&(0==e?jQuery(b+".iso_div_empty").removeClass("iso_hide_elem"):jQuery(b+".iso_div_empty").hasClass("iso_hide_elem")||jQuery(b+".iso_div_empty").addClass("iso_hide_elem")),h>0){var f=0;jQuery(c).each(function(){f>=h&&jQuery(this).addClass("iso_hide_elem"),f++}),f<h&&"infinite"!=a.pagination?jQuery(b+".iso_button_more").hide():jQuery(b+".iso_button_more").show()}0==h&&i>0&&"infinite"!=a.pagination&&(jQuery(c).each(function(){jQuery(this).hasClass("iso_hide_elem")&&(e-=1)}),e>i?jQuery(b+".iso_button_more").show():jQuery(b+".iso_button_more").hide()),d.isotope()}$(b+".ison-cancel-squared").on("click",function(){$(b+".quicksearch").val(""),qsRegex=new RegExp(k.val(),"gi"),CG_Cookie_Set(c,"search",k.val()),rangeSlider&&(ranges=(range_sel=range_init).split(","),rangeSlider.setValues(parseInt(ranges[0]),parseInt(ranges[1])),CG_Cookie_Set(c,"range",range_sel)),filters.cat=["*"],filters.tags=["*"],filters.lang=["*"],filters.alpha=["*"],filters.calendar=["*"],$(b+".filter-button-group-cat").each(function(b,a){$(a).each(function(){$(this).find(".is-checked").removeClass("is-checked"),$(this).find('[data-sort-value="*"]').addClass("is-checked"),$(this).find('[data-all="all"]').attr("selected",!0)})}),$(b+".filter-button-group-tags").each(function(b,a){$(a).each(function(){$(this).find(".is-checked").removeClass("is-checked"),$(this).find('[data-sort-value="*"]').addClass("is-checked"),$(this).find('[data-all="all"]').attr("selected",!0)})}),$(b+".filter-button-group-fields").each(function(b,a){filters[$(a).attr("data-filter-group")]=["*"],$(this).find(".is-checked").removeClass("is-checked"),$(this).find(".iso_hide_elem").removeClass("iso_hide_elem"),$(this).find('[data-sort-value="*"]').addClass("is-checked"),$(this).find('[data-all="all"]').attr("selected",!0)}),$(b+".iso_lang").each(function(b,a){$(a).each(function(){$(this).find(".is-checked").removeClass("is-checked"),$(this).find('[data-sort-value="*"]').addClass("is-checked"),$(this).find('[data-all="all"]').attr("selected",!0)})}),$(b+".filter-button-group-alpha").each(function(b,a){$(a).each(function(){$(this).find(".is-checked").removeClass("is-checked"),$(this).find('[data-sort-value="*"]').addClass("is-checked"),$(this).find('[data-all="all"]').attr("selected",!0)})}),$(b+".filter-button-group-calendar").each(function(d,a){var b=$(a);CG_Cookie_Set(c,"calendar_pos",0),b.each(function(){$(this).find(".is-checked").removeClass("is-checked")})}),$(b+'select[id^="isotope-select-"]').each(function(b,c){$val=$(this).parent().parent().parent().attr("data-filter-group");var a=document.querySelector("joomla-field-fancy-select#isotope-select-"+$val).choicesInstance;a.removeActiveItems(),a.setChoiceByValue("")}),$("#offcanvas-clone .is-checked").remove(),update_cookie_filter(filters),d.isotope(),u(),$(b+".quicksearch").focus()}),"listmulti"==a.displayfiltertags&&$(b+'select[id^="isotope-select-tags"]').each(function(b,a){$(a).on("choice",function(a,b){p($(this),a,"choice")}),$(a).on("removeItem",function(a,b){p($(this),a,"remove",a.detail)}),void 0===filters[$parent=$(a).parent().parent().parent().attr("data-filter-group")]&&(filters[$parent]=["*"])}),"listmulti"==a.displayfiltercat&&$(b+'select[id^="isotope-select-cat"]').each(function(b,a){$(a).on("choice",function(a,b){p($(this),a,"choice")}),$(a).on("removeItem",function(a,b){p($(this),a,"remove",a.detail)}),void 0===filters[$parent=$(a).parent().parent().parent().attr("data-filter-group")]&&(filters[$parent]=["*"])}),"listmulti"==a.displayfilterfields&&$(b+'select[id^="isotope-select-fields"]').each(function(b,a){$(a).on("choice",function(a,b){p($(this),a,"choice")}),$(a).on("removeItem",function(a,b){p($(this),a,"remove",a.detail)}),void 0===filters[$parent=$(a).parent().parent().parent().attr("data-filter-group")]&&(filters[$parent]=["*"])}),("list"==a.displayfiltercat||"listex"==a.displayfiltercat)&&$(b+".filter-button-group-cat").on("change",function(){o($(this))}),("list"==a.displayfiltertags||"listex"==a.displayfiltertags)&&$(b+".filter-button-group-tags").on("change",function(){o($(this))}),("list"==a.displayfilterfields||"listex"==a.displayfilterfields)&&$(b+".filter-button-group-fields").on("change",function(){o($(this))}),("multi"==a.displayfiltercat||"multiex"==a.displayfiltercat)&&($(b+".filter-button-group-cat").on("click","button",function(){r($(this))}),$(b+".filter-button-group-cat").each(function(b,a){t($(a))})),("multi"==a.displayfiltertags||"multiex"==a.displayfiltertags)&&($(b+".filter-button-group-tags").on("click","button",function(){r($(this))}),$(b+".filter-button-group-tags").each(function(b,a){t($(a))})),("multi"==a.displayfilterfields||"multiex"==a.displayfilterfields)&&($(b+".filter-button-group-fields").on("click","button",function(){r($(this))}),$(b+".filter-button-group-fields").each(function(b,a){t($(a))})),"multi"==a.language_filter&&($(b+".iso_lang").on("click","button",function(){r($(this))}),$(b+".iso_lang").each(function(b,a){t($(a))})),"multi"==a.displayalpha&&($(b+".filter-button-group-alpha").on("click","button",function(){r($(this))}),$(b+".filter-button-group-alpha").each(function(b,a){t($(a))})),"button"==a.displayfiltercat&&($(b+".filter-button-group-cat").on("click","button",function(){q($(this))}),$(b+".filter-button-group-cat").each(function(b,a){s($(a))})),"button"==a.displayfiltertags&&($(b+".filter-button-group-tags").on("click","button",function(){q($(this))}),$(b+".filter-button-group-tags").each(function(b,a){s($(a))})),"button"==a.displayfilterfields&&($(b+".filter-button-group-fields").on("click","button",function(){q($(this))}),$(b+".filter-button-group-fields").each(function(b,a){s($(a))})),"button"==a.language_filter&&($(b+".iso_lang").on("click","button",function(){q($(this))}),$(b+".iso_lang").each(function(b,a){s($(a))})),$(b+".filter-button-group-calendar").on("click touchstart","button",function(){q($(this)),$(this).hasClass("has_date")&&CG_Cookie_Set(c,"calendar_pos",document.getElementById("filter-button-group-calendar").scrollLeft)}),$(b+".filter-button-group-calendar").each(function(b,a){s($(a))}),"button"==a.displayalpha&&($(b+".filter-button-group-alpha").on("click","button",function(){q($(this))}),$(b+".filter-button-group-alpha").each(function(b,a){s($(a))})),$(b+".iso_button_more").on("click",function(b){b.preventDefault(),h>0?(h=0,$(this).text(a.libless)):(h=a.limit_items,$(this).text(a.libmore)),u()}),$("#offcanvas-clone").on("click touchstart","button",function(){"multi"==$(this).attr("data-clone-type")&&r($(this)),"button"==$(this).attr("data-clone-type")&&q($(this)),"list_multi"==$(this).attr("data-clone-type")&&(jQuery.Event("offcanvas-clone"),p($(this),event,"remove")),"list"==$(this).attr("data-clone-type")&&o($(this)),$(this).remove()})}function debounce(a,b){var c;return function(){c&&clearTimeout(c),c=setTimeout(function(){a(),c=null},b||100)}}function addFilter(a,b,c){-1==a[b].indexOf(c)&&a[b].push(c)}function removeFilter(a,b,d){var c=a[b].indexOf(d);-1!=c&&a[b].splice(c,1)}function update_cookie_filter(a){for(x in $filter_cookie="",a)$filter_cookie.length>0&&($filter_cookie+=">"),$filter_cookie+=x+"<"+a[x].toString();$filter_cookie.length>0&&($filter_cookie+=">"),CG_Cookie_Set(myid,"filter",$filter_cookie)}function getCookie(b){let a=document.cookie.match(new RegExp("(?:^|; )"+b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):""}function CG_Cookie_Set(c,a,b){$secure="","https:"==window.location.protocol&&($secure="secure;"),lecookie=getCookie(cookie_name),$cook=$val=a+":"+b,""!=lecookie&&(lecookie.indexOf(a)>=0?($cook="",($arr=lecookie.split("&")).forEach(replaceCookie,$val)):$cook=lecookie+"&"+$val),document.cookie=cookie_name+"="+$cook+"; path=/; samesite=lax;"+$secure}function replaceCookie(c,a,b){this.startsWith("search:")&&c.indexOf("search:")>=0&&(b[a]=this),this.startsWith("sort:")&&c.indexOf("sort:")>=0&&(b[a]=this),this.startsWith("filter:")&&c.indexOf("filter:")>=0&&(b[a]=this),this.startsWith("range:")&&c.indexOf("range:")>=0&&(b[a]=this),this.startsWith("calendar_pos:")&&c.indexOf("calendar_pos:")>=0&&(b[a]=this),$cook.length>0&&($cook+="&"),$cook+=b[a]}function splitCookie(c){if(me="#isotope-main-"+myid+" ",c.indexOf("search:")>=0&&jQuery(me+".quicksearch").length>0&&(val=c.split(":"),qsRegex=new RegExp(val[1],"gi"),jQuery(me+".quicksearch").val(val[1])),c.indexOf("sort:")>=0){for(i=0,$sortby=(val=(val=c.split(":"))[1].split("-"))[0].split(","),$asc="true"==val[1],sortAsc={};i<$sortby.length;i++)"featured"==$sortby[i]?sortAsc[$sortby[i]]=!1:sortAsc[$sortby[i]]=$asc;$asc=sortAsc,jQuery(me+".sort-by-button-group").each(function(c,b){var a=jQuery(b);"*"!=val[0]&&(a.find(".is-checked").removeClass("is-checked"),a.children().each(function(a,b){jQuery(this).attr("data-sort-value")==val[0]&&(jQuery(this).addClass("is-checked"),jQuery(this).attr("data-sens","+"),"true"!=val[1]&&jQuery(this).attr("data-sens","-"))}))})}if(c.indexOf("filter:")>=0&&(val=c.split(":"))[1].length>0){for(x=0,val=val[1].split(">");x<val.length-1;x++)if("cat"==(values=val[x].split("<"))[0]||"tags"==values[0]||"lang"==values[0]||"alpha"==values[0]){if("tags"==values[0]&&"listmulti"==options.displayfiltertags||"cat"==values[0]&&"listmulti"==options.displayfiltercat){var b=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0]),a=b.choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])a.setChoiceByValue("");else{for(a.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)a.setChoiceByValue(vals[c]);if("offcanvas-body"==b.parentElement.parentElement.className)for(c=0;c<a.getValue().length;c++)lib=a.getValue()[c].label,sel=a.getValue()[c].value,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list_multi">'+lib+"</button>").prependTo("#offcanvas-clone")}}else if("*"!=values[1]){for(filters[values[0]]=values[1].split(","),"lang"==values[0]?jQuery(me+".iso_lang").find(".is-checked").removeClass("is-checked"):jQuery(me+".filter-button-group-"+values[0]).find(".is-checked").removeClass("is-checked"),v=0;v<filters[values[0]].length;v++)if("tags"==values[0]&&"list"==options.displayfiltertags&&"tagsfields"!=options.article_cat_tag&&"cattagsfields"!=options.article_cat_tag||"cat"==values[0]&&"list"==options.displayfiltercat){jQuery(me+".filter-button-group-"+values[0]+" .isotope_select").val(filters[values[0]][v]).attr("selected",!0);var b=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0]);if("offcanvas-body"==b.parentElement.parentElement.className){var a=b.choicesInstance;sel=filters[values[0]][v],lib=a.getValue().label,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list">'+lib+"</button>").prependTo("#offcanvas-clone")}}else if(($button=jQuery(me+".iso_button_"+values[0]+"_"+filters[values[0]][v])).addClass("is-checked"),"offcanvas-body"==$button.parent().parent()[0].className){let d=$button.clone(!0).prependTo("#offcanvas-clone");d.attr("data-filter-group",values[0]),d.attr("data-clone-type","button"),("cat"==values[0]&&("multi"==options.displayfiltercat||"multiex"==options.displayfiltercat)||"tags"==values[0]&&("multi"==options.displayfiltertags||"multiex"==options.displayfiltercat)||"alpha"==values[0]&&("multi"==options.displayalpha||"multiex"==options.displayalpha))&&d.attr("data-clone-type","multi")}}}else if("calendar"==values[0])"*"!=values[1]&&jQuery(me+".iso_button_calendar_"+values[1]).addClass("is-checked");else if("listmulti"==options.displayfilterfields){var b=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0]),a=b.choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])a.setChoiceByValue("");else{for(a.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)a.setChoiceByValue(vals[c]);if("offcanvas-body"==b.parentElement.parentElement.className)for(c=0;c<a.getValue().length;c++)lib=a.getValue()[c].label,sel=a.getValue()[c].value,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list_multi">'+lib+"</button>").prependTo("#offcanvas-clone")}}else if("*"!=values[1])for(jQuery(me+".class_fields_"+values[0]).find(".is-checked").removeClass("is-checked"),filters[values[0]]=values[1].split(","),v=0;v<filters[values[0]].length;v++)if("list"==options.displayfilterfields||"listex"==options.displayfilterfields){($this=jQuery(me+".class_fields_"+values[0]+" .isotope_select").val(filters[values[0]][v])).attr("selected",!0);var b=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0]);if("offcanvas-body"==b.parentElement.parentElement.parentElement.className){var a=b.choicesInstance;sel=filters[values[0]][v],lib=a.getValue().label,$('<button class="btn btn-sm iso_button_'+values[0]+"_"+sel+' is-checked" data-sort-value="'+sel+'" title="'+lib+'" data-filter-group="'+values[0]+'" data-clone-type="list">'+lib+"</button>").prependTo("#offcanvas-clone")}(child=$this.find(":selected").attr("data-child"))&&set_family(me,"",child,sortValue=filters[values[0]][v],"list")}else($this=jQuery(me+".iso_button_"+values[0]+"_"+filters[values[0]][v])).addClass("is-checked"),(child=$this.attr("data-child"))&&set_family(me,"",child,sortValue=$this.attr("data-sort-value"),"button")}c.indexOf("range:")>=0&&(val=c.split(":"))[1].length>0&&(min_range=parseInt((spl=val[1].split(","))[0]),max_range=parseInt(spl[1])),c.indexOf("calendar_pos:")>=0&&(val=c.split(":"))[1].length>0&&((cal_container=document.getElementById("filter-button-group-calendar")).scrollLeft=val[1])}function set_family(e,c,b,a,d){for(parents=[];b;){if("list"==d?(($this=jQuery(e+".filter-button-group-fields").find('[data-group-id="'+b+'"]')).find("option").addClass("iso_hide_elem"),b=$this.find('[data-all="all"]').removeClass("iso_hide_elem").attr("selected",!0).attr("data-child")):($this=jQuery(e+".filter-button-group-fields").parent().find('[data-group-id="'+b+'"]'),(""==c||""!=c&&1==filters[c].length&&"*"!=filters[c])&&$this.find("button").addClass("iso_hide_elem").removeClass("is-checked"),b=$this.find("button.iso_button_tout").removeClass("iso_hide_elem").addClass("is-checked").attr("data-child")),0==parents.length){if($this.find('[data-parent="'+a+'"]').removeClass("iso_hide_elem"),newparents=$this.find('[data-parent="'+a+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)"*"!=($val="list"==d?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"))&&parents.push($val)}else{for($i=0,newparents=[];$i<parents.length;$i++)if("*"!=(a=parents[$i])&&($this.find('[data-parent="'+a+'"]').removeClass("iso_hide_elem"),($vals=$this.find('[data-parent="'+a+'"]')).length>0))for($j=0;$j<$vals.length;$j++)"*"!=($val="list"==d?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"))&&newparents.push($val);parents=newparents}filters[childstr=$this.attr("data-filter-group")]=["*"],a=""}}function del_family(d,e,b,a,c){for(parents=[];b;){if(($this=jQuery(d+".filter-button-group-fields").parent().find('[data-group-id="'+b+'"]')).find('[data-parent="'+a+'"]').addClass("iso_hide_elem").removeClass("is-checked"),b=$this.find("button.iso_button_tout").removeClass("iso_hide_elem").addClass("is-checked").attr("data-child"),0==parents.length){if(newparents=$this.find('[data-parent="'+a+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)"*"!=($val="list"==c?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"))&&(parents.push($val),newparents[$i].addClass("iso_hide_elem"))}else{for($i=0,newparents=[];$i<parents.length;$i++)if("*"!=(a=parents[$i])&&($vals=$this.find('[data-parent="'+a+'"]')).length>0)for($j=0;$j<$vals.length;$j++)"*"!=($val="list"==c?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"))&&(newparents.push($val),$vals[$j].addClass("iso_hide_elem"));parents=newparents}filters[childstr=$this.attr("data-filter-group")]=["*"],a=""}}function set_family_all(b,a,c){for(parents=[];a;){for($i=0,parents=($this="list"==c?jQuery(b+".filter-button-group-fields"):jQuery(b+".filter-button-group-fields").parent()).find('[data-child="'+a+'"]');$i<parents.length;$i++)!jQuery(parents[$i]).hasClass("iso_hide_elem")&&($val="list"==c?parents[$i].getAttribute("value"):parents[$i].getAttribute("data-sort-value"))&&"*"!=$val&&$this.find('[data-parent="'+$val+'"]').removeClass("iso_hide_elem");"list"==c?a=$this.find('[data-group-id="'+a+'"]').find('[data-all="all"]').attr("data-child"):($this.find('[data-group-id="'+a+'"]').find("button").removeClass("is-checked"),$this.find('[data-group-id="'+a+'"]').find("button.iso_button_tout").addClass("is-checked"),a=($this=jQuery(b+".filter-button-group-fields").parent().find('[data-group-id="'+a+'"]')).find("button.iso_button_tout").attr("data-child")),filters[childstr=$this.attr("data-filter-group")]=["*"]}}function go_click(b,a){event.preventDefault(),"webLinks"==b||window.event.ctrlKey?window.open(a,"_blank"):location=a}jQuery(document).ready(function($){$(".isotope-main").each(function(){return(myid=$(this).attr("data"),"undefined"==typeof Joomla|| void 0===Joomla.getOptions)?(console.error("Joomla.getOptions not found!\nThe Joomla core.js file is not being loaded."),!1):void 0!==(options=Joomla.getOptions("cg_isotope_"+myid))&&void(cookie_name="cg_isotope_"+myid,iso_cat_k2($,myid,options))}),$toggle=jQuery(".isotope_grid"),$article=jQuery(".isotope_an_article"),$article_frame=jQuery("iframe#isotope_article_frame"),("ajax"==options.readmore||"iframe"==options.readmore)&&($height=$toggle.height(),$width=$toggle.width(),$(".isotope-readmore-title").on("click touchstart",function(a){if($pos=$(".isotope-div").offset().top,$("html, body").animate({scrollTop:$pos},"slow"),a.stopPropagation(),a.preventDefault(),$toggle.addClass("isotope-hide"),$article.addClass("isotope-open"),$article.removeClass("isotope-hide"),$article.height("auto"),$article.addClass("article-loading"),"ajax"==options.readmore){$("#isotope_an_article").html("");var b=$("#token").attr("name");$.ajax({data:{[b]:"1",task:"display",format:"json",article:this.dataset.articleid,entree:options.entree},success:function(a,b,c){$article.removeClass("article-loading"),$article.height($height),$article.width($width),a.success||(a.success=!0),displayArticle(a)},error:function(a){console.log(a.responseText)}})}else"iframe"==options.readmore&&(0==$height&&($height="100vh"),$article_frame.height(0),$article_frame.width(0),$char="?",this.dataset.href.indexOf("?")>0&&($char="&"),$article_frame.attr("src",this.dataset.href+$char+"tmpl=component"),$article.addClass("article-loading"),($close=$("button.close")).addClass("isotope-hide"),$close.on("click touchstart",resetToggle));$toggle.on("click touchstart",resetToggle)})),$(".isotope-div").on("click touchstart",function(){resetToggle()}),$(".isotope_button-group").on("click touchstart",function(){resetToggle()}),resetToggle=function(){$toggle.hasClass("isotope-hide")?($article.removeClass("isotope-open"),$article.addClass("isotope-hide"),$toggle.removeClass("isotope-hide"),$(".isotope-main .isotope-div").trigger("refresh")):jQuery("#isotope_an_article").hasClass("isotope-open")&&(jQuery("#isotope_an_article").removeClass("isotope-open"),jQuery("#isotope_an_article").addClass("isotope-hide"),jQuery("#isotope_an_article").html(""),$(".isotope-main .isotope-div").trigger("refresh"))},$article_frame.on("load",function(){$article.removeClass("article-loading"),$close&&$close.removeClass("isotope-hide"),$article_frame.height($height),$article_frame.width($width)}).show();var a=document.getElementById("filter-button-group-calendar");if(a){var c=document.getElementsByClassName("iso_calendar");$une_date=c[0],$margin_left=parseInt(document.defaultView.getComputedStyle($une_date,"").getPropertyValue("margin-left")),$margin_right=parseInt(document.defaultView.getComputedStyle($une_date,"").getPropertyValue("margin-right"));var b=$une_date.offsetWidth+$margin_left+$margin_right,d=Math.floor((a.offsetWidth-a.offsetLeft)/b),e=(a.offsetWidth-a.offsetLeft)%b-$margin_left-$margin_right;f(0),document.getElementById("prev-calendar").addEventListener("click",function(){var c=null,g=0;clearInterval(c),c=setInterval(function(){g==2*d?clearInterval(c):(g++,a.scrollLeft-=b/2,f(Math.floor(a.scrollLeft/b)))},20),a.scrollLeft-=e}),document.getElementById("next-calendar").addEventListener("click",function(){var c=null,g=0;clearInterval(c),c=setInterval(function(){g==2*d?clearInterval(c):(g++,a.scrollLeft+=b/2,f(Math.floor(a.scrollLeft/b)))},20),a.scrollLeft+=e})}function f(a){$month=($date_deb=new Date(c[a].dataset.sortValue)).toLocaleString("default",{month:"short"}),($month_left=document.getElementById("calendar_month_left")).innerHTML=$month,($date_end=new Date($date_deb.toISOString().slice(0,10))).setDate($date_end.getDate()+d),$month=$date_end.toLocaleString("default",{month:"short"}),($month_right=document.getElementById("calendar_month_right")).innerHTML=$month}function g(a){a.touches&&(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY)}!function(b,a){"function"==typeof define&&define.amd?define(["exports"],a):a("undefined"!=typeof exports?exports:b.dragscroll={})}(this,function(e){var k,h=window,i=document,l="mousemove touchmove",m="mouseup touchend",n="mousedown touchstart",d="EventListener",j="add"+d,o="remove"+d,p=[],c=function(c,d){for(c=0;c<p.length;)(d=(d=p[c++]).container||d)[o](n,d.md,0),m.split(" ").forEach(function(a){h[o](a,d.mu,0)}),l.split(" ").forEach(function(a){h[o](a,d.mm,0)});for(c=0,p=[].slice.call(i.getElementsByClassName("dragscroll"));c<p.length;)!function(c,d,e,o,p,q){n.split(" ").forEach(function(a){(q=c.container||c)[j](a,q.md=function(a){g(a),c.hasAttribute("nochilddrag")&&i.elementFromPoint(a.pageX,a.pageY)!=q||(o=1,d=a.clientX,e=a.clientY,a.preventDefault())},0)}),m.split(" ").forEach(function(a){h[j](a,q.mu=function(){o=0},0)}),l.split(" ").forEach(function(e){h[j](e,q.mm=function(e){g(e),o&&((p=c.scroller||c).scrollLeft-=k=-d+(d=e.clientX),f(Math.floor(a.scrollLeft/(b+2))))},0)})}(p[c++])};"complete"==i.readyState?c():h[j]("load",c,0),e.reset=c})}) 